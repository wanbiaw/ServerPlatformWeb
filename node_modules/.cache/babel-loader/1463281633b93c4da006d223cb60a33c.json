{"remainingRequest":"F:\\ServerPlatformWeb\\node_modules\\babel-loader\\lib\\index.js!F:\\ServerPlatformWeb\\node_modules\\eslint-loader\\index.js??ref--14-0!F:\\ServerPlatformWeb\\src\\utils\\i18n.js","dependencies":[{"path":"F:\\ServerPlatformWeb\\src\\utils\\i18n.js","mtime":1651512164158},{"path":"F:\\ServerPlatformWeb\\babel.config.js","mtime":1651512117562},{"path":"F:\\ServerPlatformWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651512135878},{"path":"F:\\ServerPlatformWeb\\node_modules\\babel-loader\\lib\\index.js","mtime":1651512132831},{"path":"F:\\ServerPlatformWeb\\node_modules\\eslint-loader\\index.js","mtime":1651512148396}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZUkxOG4gZnJvbSAndnVlLWkxOG4nOwppbXBvcnQgcm91dGVzSTE4biBmcm9tICdAL3JvdXRlci9pMThuJzsKaW1wb3J0ICcuL09iamVjdHMnOwppbXBvcnQgeyBnZXRJMThuS2V5IH0gZnJvbSAnQC91dGlscy9yb3V0ZXJVdGlsJzsKLyoqDQogKiDliJvlu7ogaTE4biDphY3nva4NCiAqIEBwYXJhbSBsb2NhbGUg5pys5Zyw5YyW6K+t6KiADQogKiBAcGFyYW0gZmFsbGJhY2sg5Zue6YCA6K+t6KiADQogKiBAcmV0dXJucyB7VnVlSTE4bn0NCiAqLwoKZnVuY3Rpb24gaW5pdEkxOG4obG9jYWxlLCBmYWxsYmFjaykgewogIFZ1ZS51c2UoVnVlSTE4bik7CiAgdmFyIGkxOG5PcHRpb25zID0gewogICAgbG9jYWxlOiBsb2NhbGUsCiAgICBmYWxsYmFja0xvY2FsZTogZmFsbGJhY2ssCiAgICBzaWxlbnRGYWxsYmFja1dhcm46IHRydWUKICB9OwogIHJldHVybiBuZXcgVnVlSTE4bihpMThuT3B0aW9ucyk7Cn0KLyoqDQogKiDmoLnmja4gcm91dGVyIG9wdGlvbnMg6YWN572u55Sf5oiQIOWbvemZheWMluivreiogA0KICogQHBhcmFtIGxhbmcNCiAqIEBwYXJhbSByb3V0ZXMNCiAqIEBwYXJhbSB2YWx1ZUtleQ0KICogQHJldHVybnMgeyp9DQogKi8KCgpmdW5jdGlvbiBnZW5lcmF0ZUkxOG4obGFuZywgcm91dGVzLCB2YWx1ZUtleSkgewogIHJvdXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChyb3V0ZSkgewogICAgdmFyIGtleXMgPSBnZXRJMThuS2V5KHJvdXRlLmZ1bGxQYXRoKS5zcGxpdCgnLicpOwogICAgdmFyIHZhbHVlID0gdmFsdWVLZXkgPT09ICdwYXRoJyA/IHJvdXRlW3ZhbHVlS2V5XS5zcGxpdCgnLycpLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICByZXR1cm4gIWl0ZW0uc3RhcnRzV2l0aCgnOicpICYmIGl0ZW0gIT0gJyc7CiAgICB9KS5qb2luKCcuJykgOiByb3V0ZVt2YWx1ZUtleV07CiAgICBsYW5nLmFzc2lnblByb3BzKGtleXMsIHZhbHVlKTsKCiAgICBpZiAocm91dGUuY2hpbGRyZW4pIHsKICAgICAgZ2VuZXJhdGVJMThuKGxhbmcsIHJvdXRlLmNoaWxkcmVuLCB2YWx1ZUtleSk7CiAgICB9CiAgfSk7CiAgcmV0dXJuIGxhbmc7Cn0KLyoqDQogKiDmoLzlvI/ljJYgcm91dGVyLm9wdGlvbnMucm91dGVz77yM55Sf5oiQIGZ1bGxQYXRoDQogKiBAcGFyYW0gcm91dGVzDQogKiBAcGFyYW0gcGFyZW50UGF0aA0KICovCgoKZnVuY3Rpb24gZm9ybWF0RnVsbFBhdGgocm91dGVzKSB7CiAgdmFyIHBhcmVudFBhdGggPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICcnOwogIHJvdXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChyb3V0ZSkgewogICAgdmFyIGlzRnVsbFBhdGggPSByb3V0ZS5wYXRoLnN1YnN0cmluZygwLCAxKSA9PT0gJy8nOwogICAgcm91dGUuZnVsbFBhdGggPSBpc0Z1bGxQYXRoID8gcm91dGUucGF0aCA6IHBhcmVudFBhdGggPT09ICcvJyA/IHBhcmVudFBhdGggKyByb3V0ZS5wYXRoIDogcGFyZW50UGF0aCArICcvJyArIHJvdXRlLnBhdGg7CgogICAgaWYgKHJvdXRlLmNoaWxkcmVuKSB7CiAgICAgIGZvcm1hdEZ1bGxQYXRoKHJvdXRlLmNoaWxkcmVuLCByb3V0ZS5mdWxsUGF0aCk7CiAgICB9CiAgfSk7Cn0KLyoqDQogKiDku47ot6/nlLHmj5Dlj5blm73pmYXljJbmlbDmja4NCiAqIEBwYXJhbSBpMThuDQogKiBAcGFyYW0gcm91dGVzDQogKi8KCgpmdW5jdGlvbiBtZXJnZUkxOG5Gcm9tUm91dGVzKGkxOG4sIHJvdXRlcykgewogIGZvcm1hdEZ1bGxQYXRoKHJvdXRlcyk7CiAgdmFyIENOID0gZ2VuZXJhdGVJMThuKG5ldyBPYmplY3QoKSwgcm91dGVzLCAnbmFtZScpOwogIHZhciBVUyA9IGdlbmVyYXRlSTE4bihuZXcgT2JqZWN0KCksIHJvdXRlcywgJ3BhdGgnKTsKICBpMThuLm1lcmdlTG9jYWxlTWVzc2FnZSgnQ04nLCBDTik7CiAgaTE4bi5tZXJnZUxvY2FsZU1lc3NhZ2UoJ1VTJywgVVMpOwogIHZhciBtZXNzYWdlcyA9IHJvdXRlc0kxOG4ubWVzc2FnZXM7CiAgT2JqZWN0LmtleXMobWVzc2FnZXMpLmZvckVhY2goZnVuY3Rpb24gKGxhbmcpIHsKICAgIGkxOG4ubWVyZ2VMb2NhbGVNZXNzYWdlKGxhbmcsIG1lc3NhZ2VzW2xhbmddKTsKICB9KTsKfQoKZXhwb3J0IHsgaW5pdEkxOG4sIG1lcmdlSTE4bkZyb21Sb3V0ZXMsIGZvcm1hdEZ1bGxQYXRoIH07"},{"version":3,"sources":["F:/ServerPlatformWeb/src/utils/i18n.js"],"names":["Vue","VueI18n","routesI18n","getI18nKey","initI18n","locale","fallback","use","i18nOptions","fallbackLocale","silentFallbackWarn","generateI18n","lang","routes","valueKey","forEach","route","keys","fullPath","split","value","filter","item","startsWith","join","assignProps","children","formatFullPath","parentPath","isFullPath","path","substring","mergeI18nFromRoutes","i18n","CN","Object","US","mergeLocaleMessage","messages"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport VueI18n from 'vue-i18n'\r\nimport routesI18n from '@/router/i18n'\r\nimport './Objects'\r\nimport {getI18nKey} from '@/utils/routerUtil'\r\n\r\n/**\r\n * 创建 i18n 配置\r\n * @param locale 本地化语言\r\n * @param fallback 回退语言\r\n * @returns {VueI18n}\r\n */\r\nfunction initI18n(locale, fallback) {\r\n  Vue.use(VueI18n)\r\n  let i18nOptions = {\r\n    locale,\r\n    fallbackLocale: fallback,\r\n    silentFallbackWarn: true,\r\n  }\r\n  return new VueI18n(i18nOptions)\r\n}\r\n\r\n/**\r\n * 根据 router options 配置生成 国际化语言\r\n * @param lang\r\n * @param routes\r\n * @param valueKey\r\n * @returns {*}\r\n */\r\nfunction generateI18n(lang, routes, valueKey) {\r\n  routes.forEach(route => {\r\n    let keys = getI18nKey(route.fullPath).split('.')\r\n    let value = valueKey === 'path' ? route[valueKey].split('/').filter(item => !item.startsWith(':') && item != '').join('.') : route[valueKey]\r\n    lang.assignProps(keys, value)\r\n    if (route.children) {\r\n      generateI18n(lang, route.children, valueKey)\r\n    }\r\n  })\r\n  return lang\r\n}\r\n\r\n/**\r\n * 格式化 router.options.routes，生成 fullPath\r\n * @param routes\r\n * @param parentPath\r\n */\r\nfunction formatFullPath(routes, parentPath = '') {\r\n  routes.forEach(route => {\r\n    let isFullPath = route.path.substring(0, 1) === '/'\r\n    route.fullPath = isFullPath ? route.path : (parentPath === '/' ? parentPath + route.path : parentPath + '/' + route.path)\r\n    if (route.children) {\r\n      formatFullPath(route.children, route.fullPath)\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 从路由提取国际化数据\r\n * @param i18n\r\n * @param routes\r\n */\r\nfunction mergeI18nFromRoutes(i18n, routes) {\r\n  formatFullPath(routes)\r\n  const CN = generateI18n(new Object(), routes, 'name')\r\n  const US = generateI18n(new Object(), routes, 'path')\r\n  i18n.mergeLocaleMessage('CN', CN)\r\n  i18n.mergeLocaleMessage('US', US)\r\n  const messages = routesI18n.messages\r\n  Object.keys(messages).forEach(lang => {\r\n    i18n.mergeLocaleMessage(lang, messages[lang])\r\n  })\r\n}\r\n\r\nexport {\r\n  initI18n,\r\n  mergeI18nFromRoutes,\r\n  formatFullPath\r\n}\r\n"]}]}