{"remainingRequest":"F:\\ServerPlatformWeb\\node_modules\\babel-loader\\lib\\index.js!F:\\ServerPlatformWeb\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!F:\\ServerPlatformWeb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\ServerPlatformWeb\\src\\layouts\\AdminLayout.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\ServerPlatformWeb\\src\\layouts\\AdminLayout.vue","mtime":1651512164107},{"path":"F:\\ServerPlatformWeb\\babel.config.js","mtime":1651512117562},{"path":"F:\\ServerPlatformWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651512135878},{"path":"F:\\ServerPlatformWeb\\node_modules\\babel-loader\\lib\\index.js","mtime":1651512132831},{"path":"F:\\ServerPlatformWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651512135878},{"path":"F:\\ServerPlatformWeb\\node_modules\\vue-loader\\lib\\index.js","mtime":1651512162163}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkY6L1NlcnZlclBsYXRmb3JtV2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyLmpzIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRjovU2VydmVyUGxhdGZvcm1XZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgQWRtaW5IZWFkZXIgZnJvbSAnLi9oZWFkZXIvQWRtaW5IZWFkZXInOwppbXBvcnQgUGFnZUZvb3RlciBmcm9tICcuL2Zvb3Rlci9QYWdlRm9vdGVyJzsKaW1wb3J0IERyYXdlciBmcm9tICcuLi9jb21wb25lbnRzL3Rvb2wvRHJhd2VyJzsKaW1wb3J0IFNpZGVNZW51IGZyb20gJy4uL2NvbXBvbmVudHMvbWVudS9TaWRlTWVudSc7CmltcG9ydCBTZXR0aW5nIGZyb20gJy4uL2NvbXBvbmVudHMvc2V0dGluZy9TZXR0aW5nJzsKaW1wb3J0IHsgbWFwU3RhdGUsIG1hcE11dGF0aW9ucywgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOyAvLyBjb25zdCBtaW5IZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSA2NCAtIDEyMgoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBZG1pbkxheW91dCcsCiAgY29tcG9uZW50czogewogICAgU2V0dGluZzogU2V0dGluZywKICAgIFNpZGVNZW51OiBTaWRlTWVudSwKICAgIERyYXdlcjogRHJhd2VyLAogICAgUGFnZUZvb3RlcjogUGFnZUZvb3RlciwKICAgIEFkbWluSGVhZGVyOiBBZG1pbkhlYWRlcgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1pbkhlaWdodDogd2luZG93LmlubmVySGVpZ2h0IC0gNjQgLSAxMjIsCiAgICAgIGNvbGxhcHNlZDogZmFsc2UsCiAgICAgIHNob3dTZXR0aW5nOiBmYWxzZSwKICAgICAgZHJhd2VyT3BlbjogZmFsc2UKICAgIH07CiAgfSwKICBwcm92aWRlOiBmdW5jdGlvbiBwcm92aWRlKCkgewogICAgcmV0dXJuIHsKICAgICAgYWRtaW5MYXlvdXQ6IHRoaXMKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgJHJvdXRlOiBmdW5jdGlvbiAkcm91dGUodmFsKSB7CiAgICAgIHRoaXMuc2V0QWN0aXZhdGVkKHZhbCk7CiAgICB9LAogICAgbGF5b3V0OiBmdW5jdGlvbiBsYXlvdXQoKSB7CiAgICAgIHRoaXMuc2V0QWN0aXZhdGVkKHRoaXMuJHJvdXRlKTsKICAgIH0sCiAgICBpc01vYmlsZTogZnVuY3Rpb24gaXNNb2JpbGUodmFsKSB7CiAgICAgIGlmICghdmFsKSB7CiAgICAgICAgdGhpcy5kcmF3ZXJPcGVuID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoJ3NldHRpbmcnLCBbJ2lzTW9iaWxlJywgJ3RoZW1lJywgJ2xheW91dCcsICdmb290ZXJMaW5rcycsICdjb3B5cmlnaHQnLCAnZml4ZWRIZWFkZXInLCAnZml4ZWRTaWRlQmFyJywgJ2ZpeGVkVGFicycsICdoaWRlU2V0dGluZycsICdtdWx0aVBhZ2UnXSkpLCBtYXBHZXR0ZXJzKCdzZXR0aW5nJywgWydmaXJzdE1lbnUnLCAnc3ViTWVudScsICdtZW51RGF0YSddKSksIHt9LCB7CiAgICBzaWRlTWVudVdpZHRoOiBmdW5jdGlvbiBzaWRlTWVudVdpZHRoKCkgewogICAgICByZXR1cm4gdGhpcy5jb2xsYXBzZWQgPyAnODBweCcgOiAnMjU2cHgnOwogICAgfSwKICAgIGhlYWRlclN0eWxlOiBmdW5jdGlvbiBoZWFkZXJTdHlsZSgpIHsKICAgICAgdmFyIHdpZHRoID0gdGhpcy5maXhlZEhlYWRlciAmJiB0aGlzLmxheW91dCAhPT0gJ2hlYWQnICYmICF0aGlzLmlzTW9iaWxlID8gImNhbGMoMTAwJSAtICIuY29uY2F0KHRoaXMuc2lkZU1lbnVXaWR0aCwgIikiKSA6ICcxMDAlJzsKICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy5maXhlZEhlYWRlciA/ICdmaXhlZCcgOiAnc3RhdGljJzsKICAgICAgcmV0dXJuICJ3aWR0aDogIi5jb25jYXQod2lkdGgsICI7IHBvc2l0aW9uOiAiKS5jb25jYXQocG9zaXRpb24sICI7Iik7CiAgICB9LAogICAgaGVhZE1lbnVEYXRhOiBmdW5jdGlvbiBoZWFkTWVudURhdGEoKSB7CiAgICAgIHZhciBsYXlvdXQgPSB0aGlzLmxheW91dCwKICAgICAgICAgIG1lbnVEYXRhID0gdGhpcy5tZW51RGF0YSwKICAgICAgICAgIGZpcnN0TWVudSA9IHRoaXMuZmlyc3RNZW51OwogICAgICByZXR1cm4gbGF5b3V0ID09PSAnbWl4JyA/IGZpcnN0TWVudSA6IG1lbnVEYXRhOwogICAgfSwKICAgIHNpZGVNZW51RGF0YTogZnVuY3Rpb24gc2lkZU1lbnVEYXRhKCkgewogICAgICB2YXIgbGF5b3V0ID0gdGhpcy5sYXlvdXQsCiAgICAgICAgICBtZW51RGF0YSA9IHRoaXMubWVudURhdGEsCiAgICAgICAgICBzdWJNZW51ID0gdGhpcy5zdWJNZW51OwogICAgICByZXR1cm4gbGF5b3V0ID09PSAnbWl4JyA/IHN1Yk1lbnUgOiBtZW51RGF0YTsKICAgIH0KICB9KSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcE11dGF0aW9ucygnc2V0dGluZycsIFsnY29ycmVjdFBhZ2VNaW5IZWlnaHQnLCAnc2V0QWN0aXZhdGVkRmlyc3QnXSkpLCB7fSwgewogICAgdG9nZ2xlQ29sbGFwc2U6IGZ1bmN0aW9uIHRvZ2dsZUNvbGxhcHNlKCkgewogICAgICB0aGlzLmNvbGxhcHNlZCA9ICF0aGlzLmNvbGxhcHNlZDsKICAgIH0sCiAgICBvbk1lbnVTZWxlY3Q6IGZ1bmN0aW9uIG9uTWVudVNlbGVjdCgpIHsKICAgICAgdGhpcy50b2dnbGVDb2xsYXBzZSgpOwogICAgfSwKICAgIHNldEFjdGl2YXRlZDogZnVuY3Rpb24gc2V0QWN0aXZhdGVkKHJvdXRlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5sYXlvdXQgPT09ICdtaXgnKSB7CiAgICAgICAgdmFyIG1hdGNoZWQgPSByb3V0ZS5tYXRjaGVkOwogICAgICAgIG1hdGNoZWQgPSBtYXRjaGVkLnNsaWNlKDAsIG1hdGNoZWQubGVuZ3RoIC0gMSk7CiAgICAgICAgdmFyIGZpcnN0TWVudSA9IHRoaXMuZmlyc3RNZW51OwoKICAgICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoZmlyc3RNZW51KSwKICAgICAgICAgICAgX3N0ZXA7CgogICAgICAgIHRyeSB7CiAgICAgICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcCgpIHsKICAgICAgICAgICAgdmFyIG1lbnUgPSBfc3RlcC52YWx1ZTsKCiAgICAgICAgICAgIGlmIChtYXRjaGVkLmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgIHJldHVybiBpdGVtLnBhdGggPT09IG1lbnUuZnVsbFBhdGg7CiAgICAgICAgICAgIH0pICE9PSAtMSkgewogICAgICAgICAgICAgIF90aGlzLnNldEFjdGl2YXRlZEZpcnN0KG1lbnUuZnVsbFBhdGgpOwoKICAgICAgICAgICAgICByZXR1cm4gImJyZWFrIjsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKCiAgICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgX3JldCA9IF9sb29wKCk7CgogICAgICAgICAgICBpZiAoX3JldCA9PT0gImJyZWFrIikgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0pLAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmNvcnJlY3RQYWdlTWluSGVpZ2h0KHRoaXMubWluSGVpZ2h0IC0gMjQpOwogICAgdGhpcy5zZXRBY3RpdmF0ZWQodGhpcy4kcm91dGUpOwogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIHRoaXMuY29ycmVjdFBhZ2VNaW5IZWlnaHQoLXRoaXMubWluSGVpZ2h0ICsgMjQpOwogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;AACA;AACA,0D,CAEA;;AAEA;AACAA,qBADA;AAEAC;AAAAC;AAAAC;AAAAC;AAAAC;AAAAC;AAAA,GAFA;AAGAC,MAHA,kBAGA;AACA;AACAC,8CADA;AAEAC,sBAFA;AAGAC,wBAHA;AAIAC;AAJA;AAMA,GAVA;AAWAC,SAXA,qBAWA;AACA;AACAC;AADA;AAGA,GAfA;AAgBAC;AACAC,UADA,kBACAC,GADA,EACA;AACA;AACA,KAHA;AAIAC,UAJA,oBAIA;AACA;AACA,KANA;AAOAC,YAPA,oBAOAF,GAPA,EAOA;AACA;AACA;AACA;AACA;AAXA,GAhBA;AA6BAG,0DACAC,+GACA,WADA,EACA,aADA,EACA,WADA,EADA,GAGAC,2DAHA;AAIAC,iBAJA,2BAIA;AACA;AACA,KANA;AAOAC,eAPA,yBAOA;AACA;AACA;AACA;AACA,KAXA;AAYAC,gBAZA,0BAYA;AACA;AAAA;AAAA;AACA;AACA,KAfA;AAgBAC,gBAhBA,0BAgBA;AACA;AAAA;AAAA;AACA;AACA;AAnBA,IA7BA;AAkDAC,2CACAC,sEADA;AAEAC,kBAFA,4BAEA;AACA;AACA,KAJA;AAKAC,gBALA,0BAKA;AACA;AACA,KAPA;AAQAC,gBARA,wBAQAC,KARA,EAQA;AAAA;;AACA;AACA;AACAC;AACA;;AAHA,mDAIAC,SAJA;AAAA;;AAAA;AAAA;AAAA,gBAIAC,IAJA;;AAKA;AAAA;AAAA;AACA;;AACA;AACA;AARA;;AAIA;AAAA;;AAAA,kCAGA;AAEA;AATA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AApBA,IAlDA;AAwEAC,SAxEA,qBAwEA;AACA;AACA;AACA,GA3EA;AA4EAC,eA5EA,2BA4EA;AACA;AACA;AA9EA","names":["name","components","Setting","SideMenu","Drawer","PageFooter","AdminHeader","data","minHeight","collapsed","showSetting","drawerOpen","provide","adminLayout","watch","$route","val","layout","isMobile","computed","mapState","mapGetters","sideMenuWidth","headerStyle","headMenuData","sideMenuData","methods","mapMutations","toggleCollapse","onMenuSelect","setActivated","route","matched","firstMenu","menu","created","beforeDestroy"],"sourceRoot":"src/layouts","sources":["AdminLayout.vue"],"sourcesContent":["<template>\r\n  <a-layout :class=\"['admin-layout', 'beauty-scroll']\">\r\n    <drawer v-if=\"isMobile\" v-model=\"drawerOpen\">\r\n      <side-menu :theme=\"theme.mode\" :menuData=\"menuData\" :collapsed=\"false\" :collapsible=\"false\" @menuSelect=\"onMenuSelect\"/>\r\n    </drawer>\r\n    <side-menu :class=\"[fixedSideBar ? 'fixed-side' : '']\" :theme=\"theme.mode\" v-else-if=\"layout === 'side' || layout === 'mix'\" :menuData=\"sideMenuData\" :collapsed=\"collapsed\" :collapsible=\"true\" />\r\n    <div v-if=\"fixedSideBar && !isMobile\" :style=\"`width: ${sideMenuWidth}; min-width: ${sideMenuWidth};max-width: ${sideMenuWidth};`\" class=\"virtual-side\"></div>\r\n    <drawer v-if=\"!hideSetting\" v-model=\"showSetting\" placement=\"right\">\r\n      <div class=\"setting\" slot=\"handler\">\r\n        <a-icon :type=\"showSetting ? 'close' : 'setting'\"/>\r\n      </div>\r\n      <setting />\r\n    </drawer>\r\n    <a-layout class=\"admin-layout-main beauty-scroll\">\r\n      <admin-header :class=\"[{'fixed-tabs': fixedTabs, 'fixed-header': fixedHeader, 'multi-page': multiPage}]\" :style=\"headerStyle\" :menuData=\"headMenuData\" :collapsed=\"collapsed\" @toggleCollapse=\"toggleCollapse\"/>\r\n      <a-layout-header :class=\"['virtual-header', {'fixed-tabs' : fixedTabs, 'fixed-header': fixedHeader, 'multi-page': multiPage}]\" v-show=\"fixedHeader\"></a-layout-header>\r\n      <a-layout-content class=\"admin-layout-content\" :style=\"`min-height: ${minHeight}px;`\">\r\n        <div style=\"position: relative\">\r\n          <slot></slot>\r\n        </div>\r\n      </a-layout-content>\r\n      <a-layout-footer style=\"padding: 0px\">\r\n        <page-footer :link-list=\"footerLinks\" :copyright=\"copyright\" />\r\n      </a-layout-footer>\r\n    </a-layout>\r\n  </a-layout>\r\n</template>\r\n\r\n<script>\r\nimport AdminHeader from './header/AdminHeader'\r\nimport PageFooter from './footer/PageFooter'\r\nimport Drawer from '../components/tool/Drawer'\r\nimport SideMenu from '../components/menu/SideMenu'\r\nimport Setting from '../components/setting/Setting'\r\nimport {mapState, mapMutations, mapGetters} from 'vuex'\r\n\r\n// const minHeight = window.innerHeight - 64 - 122\r\n\r\nexport default {\r\n  name: 'AdminLayout',\r\n  components: {Setting, SideMenu, Drawer, PageFooter, AdminHeader},\r\n  data () {\r\n    return {\r\n      minHeight: window.innerHeight - 64 - 122,\r\n      collapsed: false,\r\n      showSetting: false,\r\n      drawerOpen: false\r\n    }\r\n  },\r\n  provide() {\r\n    return {\r\n      adminLayout: this\r\n    }\r\n  },\r\n  watch: {\r\n    $route(val) {\r\n      this.setActivated(val)\r\n    },\r\n    layout() {\r\n      this.setActivated(this.$route)\r\n    },\r\n    isMobile(val) {\r\n      if(!val) {\r\n        this.drawerOpen = false\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('setting', ['isMobile', 'theme', 'layout', 'footerLinks', 'copyright', 'fixedHeader', 'fixedSideBar',\r\n      'fixedTabs', 'hideSetting', 'multiPage']),\r\n    ...mapGetters('setting', ['firstMenu', 'subMenu', 'menuData']),\r\n    sideMenuWidth() {\r\n      return this.collapsed ? '80px' : '256px'\r\n    },\r\n    headerStyle() {\r\n      let width = (this.fixedHeader && this.layout !== 'head' && !this.isMobile) ? `calc(100% - ${this.sideMenuWidth})` : '100%'\r\n      let position = this.fixedHeader ? 'fixed' : 'static'\r\n      return `width: ${width}; position: ${position};`\r\n    },\r\n    headMenuData() {\r\n      const {layout, menuData, firstMenu} = this\r\n      return layout === 'mix' ? firstMenu : menuData\r\n    },\r\n    sideMenuData() {\r\n      const {layout, menuData, subMenu} = this\r\n      return layout === 'mix' ? subMenu : menuData\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations('setting', ['correctPageMinHeight', 'setActivatedFirst']),\r\n    toggleCollapse () {\r\n      this.collapsed = !this.collapsed\r\n    },\r\n    onMenuSelect () {\r\n      this.toggleCollapse()\r\n    },\r\n    setActivated(route) {\r\n      if (this.layout === 'mix') {\r\n        let matched = route.matched\r\n        matched = matched.slice(0, matched.length - 1)\r\n        const {firstMenu} = this\r\n        for (let menu of firstMenu) {\r\n          if (matched.findIndex(item => item.path === menu.fullPath) !== -1) {\r\n            this.setActivatedFirst(menu.fullPath)\r\n            break\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.correctPageMinHeight(this.minHeight - 24)\r\n    this.setActivated(this.$route)\r\n  },\r\n  beforeDestroy() {\r\n    this.correctPageMinHeight(-this.minHeight + 24)\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .admin-layout{\r\n    .side-menu{\r\n      &.fixed-side{\r\n        position: fixed;\r\n        height: 100vh;\r\n        left: 0;\r\n        top: 0;\r\n      }\r\n    }\r\n    .virtual-side{\r\n      transition: all 0.2s;\r\n    }\r\n    .virtual-header{\r\n      transition: all 0.2s;\r\n      opacity: 0;\r\n      &.fixed-tabs.multi-page:not(.fixed-header){\r\n        height: 0;\r\n      }\r\n    }\r\n    .admin-layout-main{\r\n      .admin-header{\r\n        top: 0;\r\n        right: 0;\r\n        overflow: hidden;\r\n        transition: all 0.2s;\r\n        &.fixed-tabs.multi-page:not(.fixed-header){\r\n          height: 0;\r\n        }\r\n      }\r\n    }\r\n    .admin-layout-content{\r\n      padding: 24px 24px 0;\r\n      /*overflow-x: hidden;*/\r\n      /*min-height: calc(100vh - 64px - 122px);*/\r\n    }\r\n    .setting{\r\n      background-color: @primary-color;\r\n      color: @base-bg-color;\r\n      border-radius: 5px 0 0 5px;\r\n      line-height: 40px;\r\n      font-size: 22px;\r\n      width: 40px;\r\n      height: 40px;\r\n      box-shadow: -2px 0 8px @shadow-color;\r\n    }\r\n  }\r\n</style>\r\n"]}]}