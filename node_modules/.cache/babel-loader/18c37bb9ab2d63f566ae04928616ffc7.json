{"remainingRequest":"F:\\ServerPlatformWeb\\node_modules\\babel-loader\\lib\\index.js!F:\\ServerPlatformWeb\\node_modules\\eslint-loader\\index.js??ref--14-0!F:\\ServerPlatformWeb\\src\\plugins\\authority-plugin.js","dependencies":[{"path":"F:\\ServerPlatformWeb\\src\\plugins\\authority-plugin.js","mtime":1651512164134},{"path":"F:\\ServerPlatformWeb\\babel.config.js","mtime":1651512117562},{"path":"F:\\ServerPlatformWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651512135878},{"path":"F:\\ServerPlatformWeb\\node_modules\\babel-loader\\lib\\index.js","mtime":1651512132831},{"path":"F:\\ServerPlatformWeb\\node_modules\\eslint-loader\\index.js","mtime":1651512148396}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkY6L1NlcnZlclBsYXRmb3JtV2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CgovKioNCiAqIOiOt+WPlui3r+eUsemcgOimgeeahOadg+mZkA0KICogQHBhcmFtIHBlcm1pc3Npb25zDQogKiBAcGFyYW0gcm91dGUNCiAqIEByZXR1cm5zIHtQZXJtaXNzaW9ufQ0KICovCnZhciBnZXRSb3V0ZVBlcm1pc3Npb24gPSBmdW5jdGlvbiBnZXRSb3V0ZVBlcm1pc3Npb24ocGVybWlzc2lvbnMsIHJvdXRlKSB7CiAgcmV0dXJuIHBlcm1pc3Npb25zLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiBpdGVtLmlkID09PSByb3V0ZS5tZXRhLmF1dGhvcml0eS5wZXJtaXNzaW9uOwogIH0pOwp9OwovKioNCiAqIOiOt+WPlui3r+eUsemcgOimgeeahOinkuiJsg0KICogQHBhcmFtIHJvbGVzDQogKiBAcGFyYW0gcm91dGUNCiAqIEByZXR1cm5zIHtBcnJheVtSb2xlXX0NCiAqLwoKCnZhciBnZXRSb3V0ZVJvbGUgPSBmdW5jdGlvbiBnZXRSb3V0ZVJvbGUocm9sZXMsIHJvdXRlKSB7CiAgdmFyIHJlcXVpcmVkUm9sZXMgPSByb3V0ZS5tZXRhLmF1dGhvcml0eS5yb2xlOwogIHJldHVybiByZXF1aXJlZFJvbGVzID8gcm9sZXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gcmVxdWlyZWRSb2xlcy5maW5kSW5kZXgoZnVuY3Rpb24gKHJlcXVpcmVkKSB7CiAgICAgIHJldHVybiByZXF1aXJlZCA9PT0gaXRlbS5pZDsKICAgIH0pICE9PSAtMTsKICB9KSA6IFtdOwp9OwovKioNCiAqIOWIpOaWreaYr+WQpuW3suS4uuaWueazleazqOWFpeadg+mZkOiupOivgQ0KICogQHBhcmFtIG1ldGhvZA0KICogQHJldHVybnMge2Jvb2xlYW59DQogKi8KCgp2YXIgaGFzSW5qZWN0ZWQgPSBmdW5jdGlvbiBoYXNJbmplY3RlZChtZXRob2QpIHsKICByZXR1cm4gbWV0aG9kLnRvU3RyaW5nKCkuaW5kZXhPZignLy8tLWF1dGgtaW5qZWN0JykgIT09IC0xOwp9OwovKioNCiAqIOaTjeS9nOadg+mZkOagoemqjA0KICogQHBhcmFtIGF1dGhDb25maWcNCiAqIEBwYXJhbSBwZXJtaXNzaW9uDQogKiBAcGFyYW0gcm9sZQ0KICogQHBhcmFtIHBlcm1pc3Npb25zDQogKiBAcGFyYW0gcm9sZXMNCiAqIEByZXR1cm5zIHtib29sZWFufQ0KICovCgoKdmFyIGF1dGggPSBmdW5jdGlvbiBhdXRoKGF1dGhDb25maWcsIHBlcm1pc3Npb24sIHJvbGUsIHBlcm1pc3Npb25zLCByb2xlcykgewogIHZhciBjaGVjayA9IGF1dGhDb25maWcuY2hlY2ssCiAgICAgIHR5cGUgPSBhdXRoQ29uZmlnLnR5cGU7CgogIGlmIChjaGVjayAmJiB0eXBlb2YgY2hlY2sgPT09ICdmdW5jdGlvbicpIHsKICAgIHJldHVybiBjaGVjay5hcHBseSh0aGlzLCBbcGVybWlzc2lvbiwgcm9sZSwgcGVybWlzc2lvbnMsIHJvbGVzXSk7CiAgfQoKICBpZiAodHlwZSA9PT0gJ3Blcm1pc3Npb24nKSB7CiAgICByZXR1cm4gY2hlY2tGcm9tUGVybWlzc2lvbihjaGVjaywgcGVybWlzc2lvbik7CiAgfSBlbHNlIGlmICh0eXBlID09PSAncm9sZScpIHsKICAgIHJldHVybiBjaGVja0Zyb21Sb2xlcyhjaGVjaywgcm9sZSk7CiAgfSBlbHNlIHsKICAgIHJldHVybiBjaGVja0Zyb21QZXJtaXNzaW9uKGNoZWNrLCBwZXJtaXNzaW9uKSB8fCBjaGVja0Zyb21Sb2xlcyhjaGVjaywgcm9sZSk7CiAgfQp9OwovKioNCiAqIOajgOafpeadg+mZkOaYr+WQpuacieaTjeS9nOadg+mZkA0KICogQHBhcmFtIGNoZWNrIOmcgOimgeajgOafpeeahOaTjeS9nOadg+mZkA0KICogQHBhcmFtIHBlcm1pc3Npb24g5p2D6ZmQDQogKiBAcmV0dXJucyB7Ym9vbGVhbn0NCiAqLwoKCnZhciBjaGVja0Zyb21QZXJtaXNzaW9uID0gZnVuY3Rpb24gY2hlY2tGcm9tUGVybWlzc2lvbihjaGVjaywgcGVybWlzc2lvbikgewogIHJldHVybiBwZXJtaXNzaW9uICYmIHBlcm1pc3Npb24ub3BlcmF0aW9uICYmIHBlcm1pc3Npb24ub3BlcmF0aW9uLmluZGV4T2YoY2hlY2spICE9PSAtMTsKfTsKLyoqDQogKiDmo4Dmn6Ugcm9sZXMg5piv5ZCm5pyJ5pON5L2c5p2D6ZmQDQogKiBAcGFyYW0gY2hlY2sg6ZyA6KaB5qOA5p+l55qE5pON5L2c5p2D6ZmQDQogKiBAcGFyYW0gcm9sZXMg6KeS6Imy5pWw57uEDQogKiBAcmV0dXJucyB7Ym9vbGVhbn0NCiAqLwoKCnZhciBjaGVja0Zyb21Sb2xlcyA9IGZ1bmN0aW9uIGNoZWNrRnJvbVJvbGVzKGNoZWNrLCByb2xlcykgewogIGlmICghcm9sZXMpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihyb2xlcyksCiAgICAgIF9zdGVwOwoKICB0cnkgewogICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgdmFyIHJvbGUgPSBfc3RlcC52YWx1ZTsKICAgICAgdmFyIG9wZXJhdGlvbiA9IHJvbGUub3BlcmF0aW9uOwoKICAgICAgaWYgKG9wZXJhdGlvbiAmJiBvcGVyYXRpb24uaW5kZXhPZihjaGVjaykgIT09IC0xKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9pdGVyYXRvci5lKGVycik7CiAgfSBmaW5hbGx5IHsKICAgIF9pdGVyYXRvci5mKCk7CiAgfQoKICByZXR1cm4gZmFsc2U7Cn07Cgp2YXIgY2hlY2tJbmplY3QgPSBmdW5jdGlvbiBjaGVja0luamVjdChlbCwgYmluZGluZywgdm5vZGUpIHsKICB2YXIgdHlwZSA9IGJpbmRpbmcuYXJnOwogIHZhciBjaGVjayA9IGJpbmRpbmcudmFsdWU7CiAgdmFyIGluc3RhbmNlID0gdm5vZGUuY29udGV4dDsKICB2YXIgJGF1dGggPSBpbnN0YW5jZS4kYXV0aDsKCiAgaWYgKCEkYXV0aCB8fCAhJGF1dGgoY2hlY2ssIHR5cGUpKSB7CiAgICBhZGREaXNhYmxlZChlbCk7CiAgfSBlbHNlIHsKICAgIHJlbW92ZURpc2FibGVkKGVsKTsKICB9Cn07Cgp2YXIgYWRkRGlzYWJsZWQgPSBmdW5jdGlvbiBhZGREaXNhYmxlZChlbCkgewogIGlmIChlbC50YWdOYW1lID09PSAnQlVUVE9OJykgewogICAgZWwuZGlzYWJsZWQgPSB0cnVlOwogIH0gZWxzZSB7CiAgICBlbC5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpOwogIH0KCiAgZWwuc2V0QXR0cmlidXRlKCd0aXRsZScsICfml6DmraTmnYPpmZAnKTsKfTsKCnZhciByZW1vdmVEaXNhYmxlZCA9IGZ1bmN0aW9uIHJlbW92ZURpc2FibGVkKGVsKSB7CiAgZWwuZGlzYWJsZWQgPSBmYWxzZTsKICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpOwogIGVsLnJlbW92ZUF0dHJpYnV0ZSgndGl0bGUnKTsKfTsKCnZhciBBdXRob3JpdHlQbHVnaW4gPSB7CiAgaW5zdGFsbDogZnVuY3Rpb24gaW5zdGFsbChWdWUpIHsKICAgIFZ1ZS5kaXJlY3RpdmUoJ2F1dGgnLCB7CiAgICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoZWwsIGJpbmRpbmcsIHZub2RlKSB7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gY2hlY2tJbmplY3QoZWwsIGJpbmRpbmcsIHZub2RlKTsKICAgICAgICB9LCAxMCk7CiAgICAgIH0sCiAgICAgIGNvbXBvbmVudFVwZGF0ZWQ6IGZ1bmN0aW9uIGNvbXBvbmVudFVwZGF0ZWQoZWwsIGJpbmRpbmcsIHZub2RlKSB7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gY2hlY2tJbmplY3QoZWwsIGJpbmRpbmcsIHZub2RlKTsKICAgICAgICB9LCAxMCk7CiAgICAgIH0sCiAgICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKGVsKSB7CiAgICAgICAgcmVtb3ZlRGlzYWJsZWQoZWwpOwogICAgICB9CiAgICB9KTsKICAgIFZ1ZS5taXhpbih7CiAgICAgIGJlZm9yZUNyZWF0ZTogZnVuY3Rpb24gYmVmb3JlQ3JlYXRlKCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAgIGlmICh0aGlzLiRvcHRpb25zLmF1dGhvcml6ZSkgewogICAgICAgICAgdmFyIGF1dGhvcml6ZSA9IHRoaXMuJG9wdGlvbnMuYXV0aG9yaXplOwogICAgICAgICAgT2JqZWN0LmtleXMoYXV0aG9yaXplKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICAgICAgaWYgKF90aGlzLiRvcHRpb25zLm1ldGhvZHNba2V5XSkgewogICAgICAgICAgICAgIHZhciBtZXRob2QgPSBfdGhpcy4kb3B0aW9ucy5tZXRob2RzW2tleV07CgogICAgICAgICAgICAgIGlmICghaGFzSW5qZWN0ZWQobWV0aG9kKSkgewogICAgICAgICAgICAgICAgdmFyIGF1dGhDb25maWcgPSBhdXRob3JpemVba2V5XTsKICAgICAgICAgICAgICAgIGF1dGhDb25maWcgPSB0eXBlb2YgYXV0aENvbmZpZyA9PT0gJ3N0cmluZycgPyB7CiAgICAgICAgICAgICAgICAgIGNoZWNrOiBhdXRoQ29uZmlnCiAgICAgICAgICAgICAgICB9IDogYXV0aENvbmZpZzsKICAgICAgICAgICAgICAgIHZhciBfYXV0aENvbmZpZyA9IGF1dGhDb25maWcsCiAgICAgICAgICAgICAgICAgICAgY2hlY2sgPSBfYXV0aENvbmZpZy5jaGVjaywKICAgICAgICAgICAgICAgICAgICB0eXBlID0gX2F1dGhDb25maWcudHlwZSwKICAgICAgICAgICAgICAgICAgICBvbkZhaWx1cmUgPSBfYXV0aENvbmZpZy5vbkZhaWx1cmU7CgogICAgICAgICAgICAgICAgX3RoaXMuJG9wdGlvbnMubWV0aG9kc1trZXldID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAvLy0tYXV0aC1pbmplY3QKICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuJGF1dGgoY2hlY2ssIHR5cGUpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmIChvbkZhaWx1cmUgJiYgdHlwZW9mIG9uRmFpbHVyZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICAgICAgdGhpc1siJCIuY29uY2F0KGNoZWNrLCAiRmFpbHVyZSIpXSA9IG9uRmFpbHVyZTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzWyIkIi5jb25jYXQoY2hlY2ssICJGYWlsdXJlIildKGNoZWNrKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigiXHU1QkY5XHU0RTBEXHU4RDc3XHVGRjBDXHU2MEE4XHU2Q0ExXHU2NzA5XHU2NENEXHU0RjVDXHU2NzQzXHU5NjUwXHVGRjFBIi5jb25jYXQoY2hlY2spKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBtZXRob2RzOiB7CiAgICAgICAgLyoqDQogICAgICAgICAqIOaTjeS9nOadg+mZkOagoemqjA0KICAgICAgICAgKiBAcGFyYW0gY2hlY2sg6ZyA6KaB5qCh6aqM55qE5pON5L2c5ZCNDQogICAgICAgICAqIEBwYXJhbSB0eXBlIOagoemqjOexu+Wei++8jOmAmui/hyBwZXJtaXNzaW9uIOagoemqjO+8jOi/mOaYr+mAmui/hyByb2xlIOagoemqjOOAgg0KICAgICAgICAgKiDlpoLmnKrorr7nva7vvIzliJnoh6rliqjor4bliKvvvIzlpoLljLnphY3liLDlvZPliY3ot6/nlLEgcGVybWlzc2lvbiDliJkgdHlwZSA9IHBlcm1pc3Npb27vvIzlkKbliJkgdHlwZSA9IHJvbGUNCiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IOaYr+WQpuagoemqjOmAmui/hw0KICAgICAgICAgKi8KICAgICAgICAkYXV0aDogZnVuY3Rpb24gJGF1dGgoY2hlY2ssIHR5cGUpIHsKICAgICAgICAgIHZhciBwZXJtaXNzaW9ucyA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2FjY291bnQvcGVybWlzc2lvbnMnXTsKICAgICAgICAgIHZhciByb2xlcyA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2FjY291bnQvcm9sZXMnXTsKICAgICAgICAgIHZhciBwZXJtaXNzaW9uID0gZ2V0Um91dGVQZXJtaXNzaW9uKHBlcm1pc3Npb25zLCB0aGlzLiRyb3V0ZSk7CiAgICAgICAgICB2YXIgcm9sZSA9IGdldFJvdXRlUm9sZShyb2xlcywgdGhpcy4kcm91dGUpOwogICAgICAgICAgcmV0dXJuIGF1dGguYXBwbHkodGhpcywgW3sKICAgICAgICAgICAgY2hlY2s6IGNoZWNrLAogICAgICAgICAgICB0eXBlOiB0eXBlCiAgICAgICAgICB9LCBwZXJtaXNzaW9uLCByb2xlLCBwZXJtaXNzaW9ucywgcm9sZXNdKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgQXV0aG9yaXR5UGx1Z2luOw=="},{"version":3,"sources":["F:/ServerPlatformWeb/src/plugins/authority-plugin.js"],"names":["getRoutePermission","permissions","route","find","item","id","meta","authority","permission","getRouteRole","roles","requiredRoles","role","filter","findIndex","required","hasInjected","method","toString","indexOf","auth","authConfig","check","type","apply","checkFromPermission","checkFromRoles","operation","checkInject","el","binding","vnode","arg","value","instance","context","$auth","addDisabled","removeDisabled","tagName","disabled","classList","add","setAttribute","remove","removeAttribute","AuthorityPlugin","install","Vue","directive","bind","setTimeout","componentUpdated","unbind","mixin","beforeCreate","$options","authorize","Object","keys","forEach","key","methods","onFailure","arguments","$message","error","$store","getters","$route"],"mappings":"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","sourcesContent":["/**\r\n * 获取路由需要的权限\r\n * @param permissions\r\n * @param route\r\n * @returns {Permission}\r\n */\r\nconst getRoutePermission = (permissions, route) => permissions.find(item => item.id === route.meta.authority.permission)\r\n/**\r\n * 获取路由需要的角色\r\n * @param roles\r\n * @param route\r\n * @returns {Array[Role]}\r\n */\r\nconst getRouteRole = (roles, route) => {\r\n  const requiredRoles = route.meta.authority.role\r\n  return requiredRoles ? roles.filter(item => requiredRoles.findIndex(required => required === item.id) !== -1) : []\r\n}\r\n/**\r\n * 判断是否已为方法注入权限认证\r\n * @param method\r\n * @returns {boolean}\r\n */\r\nconst hasInjected = (method) => method.toString().indexOf('//--auth-inject') !== -1\r\n\r\n/**\r\n * 操作权限校验\r\n * @param authConfig\r\n * @param permission\r\n * @param role\r\n * @param permissions\r\n * @param roles\r\n * @returns {boolean}\r\n */\r\nconst auth = function(authConfig, permission, role, permissions, roles) {\r\n  const {check, type} = authConfig\r\n  if (check && typeof check === 'function') {\r\n    return check.apply(this, [permission, role, permissions, roles])\r\n  }\r\n  if (type === 'permission') {\r\n    return checkFromPermission(check, permission)\r\n  } else if (type === 'role') {\r\n    return checkFromRoles(check, role)\r\n  } else {\r\n    return checkFromPermission(check, permission) || checkFromRoles(check, role)\r\n  }\r\n}\r\n\r\n/**\r\n * 检查权限是否有操作权限\r\n * @param check 需要检查的操作权限\r\n * @param permission 权限\r\n * @returns {boolean}\r\n */\r\nconst checkFromPermission = function(check, permission) {\r\n  return permission && permission.operation && permission.operation.indexOf(check) !== -1\r\n}\r\n\r\n/**\r\n * 检查 roles 是否有操作权限\r\n * @param check 需要检查的操作权限\r\n * @param roles 角色数组\r\n * @returns {boolean}\r\n */\r\nconst checkFromRoles = function(check, roles) {\r\n  if (!roles) {\r\n    return false\r\n  }\r\n  for (let role of roles) {\r\n    const {operation} = role\r\n    if (operation && operation.indexOf(check) !== -1) {\r\n      return true\r\n    }\r\n  }\r\n  return false\r\n}\r\n\r\nconst checkInject = function (el, binding,vnode) {\r\n  const type = binding.arg\r\n  const check = binding.value\r\n  const instance = vnode.context\r\n  const $auth = instance.$auth\r\n  if (!$auth || !$auth(check, type)) {\r\n    addDisabled(el)\r\n  } else {\r\n    removeDisabled(el)\r\n  }\r\n}\r\n\r\nconst addDisabled = function (el) {\r\n  if (el.tagName === 'BUTTON') {\r\n    el.disabled = true\r\n  } else {\r\n    el.classList.add('disabled')\r\n  }\r\n  el.setAttribute('title', '无此权限')\r\n}\r\n\r\nconst removeDisabled = function (el) {\r\n  el.disabled = false\r\n  el.classList.remove('disabled')\r\n  el.removeAttribute('title')\r\n}\r\n\r\nconst AuthorityPlugin = {\r\n  install(Vue) {\r\n    Vue.directive('auth', {\r\n      bind(el, binding,vnode) {\r\n        setTimeout(() => checkInject(el, binding, vnode), 10)\r\n      },\r\n      componentUpdated(el, binding,vnode) {\r\n        setTimeout(() => checkInject(el, binding, vnode), 10)\r\n      },\r\n      unbind(el) {\r\n        removeDisabled(el)\r\n      }\r\n    })\r\n    Vue.mixin({\r\n      beforeCreate() {\r\n        if (this.$options.authorize) {\r\n          const authorize = this.$options.authorize\r\n          Object.keys(authorize).forEach(key => {\r\n            if (this.$options.methods[key]) {\r\n              const method = this.$options.methods[key]\r\n              if (!hasInjected(method)) {\r\n                let authConfig = authorize[key]\r\n                authConfig = (typeof authConfig === 'string') ? {check: authConfig} : authConfig\r\n                const {check, type, onFailure} = authConfig\r\n                this.$options.methods[key] = function () {\r\n                  //--auth-inject\r\n                  if (this.$auth(check, type)) {\r\n                    return method.apply(this, arguments)\r\n                  } else {\r\n                    if (onFailure && typeof onFailure === 'function') {\r\n                      this[`$${check}Failure`] = onFailure\r\n                      return this[`$${check}Failure`](check)\r\n                    } else {\r\n                      this.$message.error(`对不起，您没有操作权限：${check}`)\r\n                    }\r\n                    return 0\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          })\r\n        }\r\n      },\r\n      methods: {\r\n        /**\r\n         * 操作权限校验\r\n         * @param check 需要校验的操作名\r\n         * @param type 校验类型，通过 permission 校验，还是通过 role 校验。\r\n         * 如未设置，则自动识别，如匹配到当前路由 permission 则 type = permission，否则 type = role\r\n         * @returns {boolean} 是否校验通过\r\n         */\r\n        $auth(check, type) {\r\n          const permissions = this.$store.getters['account/permissions']\r\n          const roles = this.$store.getters['account/roles']\r\n          const permission = getRoutePermission(permissions, this.$route)\r\n          const role = getRouteRole(roles, this.$route)\r\n          return auth.apply(this, [{check, type}, permission, role, permissions, roles])\r\n        }\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nexport default AuthorityPlugin\r\n"]}]}