{"remainingRequest":"F:\\ServerPlatformWeb\\node_modules\\babel-loader\\lib\\index.js!F:\\ServerPlatformWeb\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!F:\\ServerPlatformWeb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\ServerPlatformWeb\\src\\layouts\\tabs\\TabsHead.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\ServerPlatformWeb\\src\\layouts\\tabs\\TabsHead.vue","mtime":1651512164115},{"path":"F:\\ServerPlatformWeb\\babel.config.js","mtime":1651512117562},{"path":"F:\\ServerPlatformWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651512135878},{"path":"F:\\ServerPlatformWeb\\node_modules\\babel-loader\\lib\\index.js","mtime":1651512132831},{"path":"F:\\ServerPlatformWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651512135878},{"path":"F:\\ServerPlatformWeb\\node_modules\\vue-loader\\lib\\index.js","mtime":1651512162163}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRjovU2VydmVyUGxhdGZvcm1XZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwU3RhdGUsIG1hcE11dGF0aW9ucyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBnZXRJMThuS2V5IH0gZnJvbSAnQC91dGlscy9yb3V0ZXJVdGlsJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdUYWJzSGVhZCcsCiAgaTE4bjogewogICAgbWVzc2FnZXM6IHsKICAgICAgQ046IHsKICAgICAgICBsb2NrOiAn54K55Ye76ZSB5a6a6aG1562+5aS0JywKICAgICAgICB1bmxvY2s6ICfngrnlh7vop6PpmaTplIHlrponCiAgICAgIH0sCiAgICAgIEhLOiB7CiAgICAgICAgbG9jazogJ+m7nuaTiumOluWumumggeewvemgrScsCiAgICAgICAgdW5sb2NrOiAn6bue5pOK6Kej6Zmk6Y6W5a6aJwogICAgICB9LAogICAgICBVUzogewogICAgICAgIGxvY2s6ICdjbGljayB0byBsb2NrIHRoZSB0YWJzIGhlYWQnLAogICAgICAgIHVubG9jazogJ2NsaWNrIHRvIHVubG9jaycKICAgICAgfQogICAgfQogIH0sCiAgcHJvcHM6IHsKICAgIHBhZ2VMaXN0OiBBcnJheSwKICAgIGFjdGl2ZTogU3RyaW5nLAogICAgZml4ZWQ6IEJvb2xlYW4KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhZmZpeGVkOiBmYWxzZQogICAgfTsKICB9LAogIGluamVjdDogWydhZG1pbkxheW91dCddLAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmFmZml4ZWQgPSB0aGlzLmZpeGVkVGFiczsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKCdzZXR0aW5nJywgWydsYXlvdXQnLCAncGFnZVdpZHRoJywgJ2ZpeGVkSGVhZGVyJywgJ2ZpeGVkVGFicycsICdjdXN0b21UaXRsZXMnXSkpLCB7fSwgewogICAgbG9ja1RpdGxlOiBmdW5jdGlvbiBsb2NrVGl0bGUoKSB7CiAgICAgIHJldHVybiB0aGlzLiR0KHRoaXMuZml4ZWRUYWJzID8gJ3VubG9jaycgOiAnbG9jaycpOwogICAgfQogIH0pLAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwTXV0YXRpb25zKCdzZXR0aW5nJywgWydzZXRGaXhlZFRhYnMnXSkpLCB7fSwgewogICAgb25Mb2NrQ2xpY2s6IGZ1bmN0aW9uIG9uTG9ja0NsaWNrKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5zZXRGaXhlZFRhYnMoIXRoaXMuZml4ZWRUYWJzKTsKCiAgICAgIGlmICh0aGlzLmZpeGVkVGFicykgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMuYWZmaXhlZCA9IHRydWU7CiAgICAgICAgfSwgMjAwKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFmZml4ZWQgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIG9uVGFiQ2xpY2s6IGZ1bmN0aW9uIG9uVGFiQ2xpY2soa2V5KSB7CiAgICAgIGlmICh0aGlzLmFjdGl2ZSAhPT0ga2V5KSB7CiAgICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJywga2V5KTsKICAgICAgfQogICAgfSwKICAgIG9uQ2xvc2U6IGZ1bmN0aW9uIG9uQ2xvc2Uoa2V5KSB7CiAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlJywga2V5KTsKICAgIH0sCiAgICBvblJlZnJlc2g6IGZ1bmN0aW9uIG9uUmVmcmVzaChwYWdlKSB7CiAgICAgIHRoaXMuJGVtaXQoJ3JlZnJlc2gnLCBwYWdlLnBhdGgsIHBhZ2UpOwogICAgfSwKICAgIG9uQ29udGV4dG1lbnU6IGZ1bmN0aW9uIG9uQ29udGV4dG1lbnUocGFnZUtleSwgZSkgewogICAgICB0aGlzLiRlbWl0KCdjb250ZXh0bWVudScsIHBhZ2VLZXksIGUpOwogICAgfSwKICAgIHBhZ2VOYW1lOiBmdW5jdGlvbiBwYWdlTmFtZShwYWdlKSB7CiAgICAgIHZhciBwYWdlUGF0aCA9IHBhZ2UuZnVsbFBhdGguc3BsaXQoJz8nKVswXTsKICAgICAgdmFyIGN1c3RvbSA9IHRoaXMuY3VzdG9tVGl0bGVzLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5wYXRoID09PSBwYWdlUGF0aDsKICAgICAgfSk7CiAgICAgIHJldHVybiBjdXN0b20gJiYgY3VzdG9tLnRpdGxlIHx8IHBhZ2UudGl0bGUgfHwgdGhpcy4kdChnZXRJMThuS2V5KHBhZ2Uua2V5UGF0aCkpOwogICAgfQogIH0pCn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AAEA;AACAA,kBADA;AAEAC;AACAC;AACAC;AACAC,uBADA;AAEAC;AAFA,OADA;AAKAC;AACAF,uBADA;AAEAC;AAFA,OALA;AASAE;AACAH,2CADA;AAEAC;AAFA;AATA;AADA,GAFA;AAkBAG;AACAC,mBADA;AAEAC,kBAFA;AAGAC;AAHA,GAlBA;AAuBAC,MAvBA,kBAuBA;AACA;AACAC;AADA;AAGA,GA3BA;AA4BAC,yBA5BA;AA6BAC,SA7BA,qBA6BA;AACA;AACA,GA/BA;AAgCAC,4CACAC,wFADA;AAEAC,aAFA,uBAEA;AACA;AACA;AAJA,IAhCA;AAsCAC,2CACAC,yCADA;AAEAC,eAFA,yBAEA;AAAA;;AACA;;AACA;AACAC;AACA;AACA,SAFA,EAEA,GAFA;AAGA,OAJA,MAIA;AACA;AACA;AACA,KAXA;AAYAC,cAZA,sBAYAC,GAZA,EAYA;AACA;AACA;AACA;AACA,KAhBA;AAiBAC,WAjBA,mBAiBAD,GAjBA,EAiBA;AACA;AACA,KAnBA;AAoBAE,aApBA,qBAoBAC,IApBA,EAoBA;AACA;AACA,KAtBA;AAuBAC,iBAvBA,yBAuBAC,OAvBA,EAuBAC,CAvBA,EAuBA;AACA;AACA,KAzBA;AA0BAC,YA1BA,oBA0BAJ,IA1BA,EA0BA;AACA;AACA;AAAA;AAAA;AACA;AACA;AA9BA;AAtCA","names":["name","i18n","messages","CN","lock","unlock","HK","US","props","pageList","active","fixed","data","affixed","inject","created","computed","mapState","lockTitle","methods","mapMutations","onLockClick","setTimeout","onTabClick","key","onClose","onRefresh","page","onContextmenu","pageKey","e","pageName"],"sourceRoot":"src/layouts/tabs","sources":["TabsHead.vue"],"sourcesContent":["<template>\r\n  <div :class=\"['tabs-head', layout, pageWidth]\">\r\n    <a-tabs\r\n        type=\"editable-card\"\r\n        :class=\"['tabs-container', layout, pageWidth, {'affixed' : affixed, 'fixed-header' : fixedHeader, 'collapsed' : adminLayout.collapsed}]\"\r\n        :active-key=\"active\"\r\n        :hide-add=\"true\"\r\n    >\r\n      <a-tooltip placement=\"left\" :title=\"lockTitle\" slot=\"tabBarExtraContent\">\r\n        <a-icon\r\n            theme=\"filled\"\r\n            @click=\"onLockClick\"\r\n            class=\"header-lock\"\r\n            :type=\"fixedTabs ? 'lock' : 'unlock'\"\r\n        />\r\n      </a-tooltip>\r\n      <a-tab-pane v-for=\"page in pageList\" :key=\"page.path\">\r\n        <div slot=\"tab\" class=\"tab\" @contextmenu=\"e => onContextmenu(page.path, e)\">\r\n          <a-icon @click=\"onRefresh(page)\" :class=\"['icon-sync', {'hide': page.path !== active && !page.loading}]\" :type=\"page.loading ? 'loading' : 'sync'\" />\r\n          <div class=\"title\" @click=\"onTabClick(page.path)\" >{{pageName(page)}}</div>\r\n          <a-icon v-if=\"!page.unclose\" @click=\"onClose(page.path)\" class=\"icon-close\" type=\"close\"/>\r\n        </div>\r\n      </a-tab-pane>\r\n    </a-tabs>\r\n    <div v-if=\"affixed\" class=\"virtual-tabs\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {mapState, mapMutations} from 'vuex'\r\n  import {getI18nKey} from '@/utils/routerUtil'\r\n\r\n  export default {\r\n    name: 'TabsHead',\r\n    i18n: {\r\n      messages: {\r\n        CN: {\r\n          lock: '点击锁定页签头',\r\n          unlock: '点击解除锁定',\r\n        },\r\n        HK: {\r\n          lock: '點擊鎖定頁簽頭',\r\n          unlock: '點擊解除鎖定',\r\n        },\r\n        US: {\r\n          lock: 'click to lock the tabs head',\r\n          unlock: 'click to unlock',\r\n        }\r\n      }\r\n    },\r\n    props: {\r\n      pageList: Array,\r\n      active: String,\r\n      fixed: Boolean\r\n    },\r\n    data() {\r\n      return {\r\n        affixed: false,\r\n      }\r\n    },\r\n    inject:['adminLayout'],\r\n    created() {\r\n      this.affixed = this.fixedTabs\r\n    },\r\n    computed: {\r\n      ...mapState('setting', ['layout', 'pageWidth', 'fixedHeader', 'fixedTabs', 'customTitles']),\r\n      lockTitle() {\r\n        return this.$t(this.fixedTabs ? 'unlock' : 'lock')\r\n      }\r\n    },\r\n    methods: {\r\n      ...mapMutations('setting', ['setFixedTabs']),\r\n      onLockClick() {\r\n        this.setFixedTabs(!this.fixedTabs)\r\n        if (this.fixedTabs) {\r\n          setTimeout(() => {\r\n            this.affixed = true\r\n          }, 200)\r\n        } else {\r\n          this.affixed = false\r\n        }\r\n      },\r\n      onTabClick(key) {\r\n        if (this.active !== key) {\r\n          this.$emit('change', key)\r\n        }\r\n      },\r\n      onClose(key) {\r\n        this.$emit('close', key)\r\n      },\r\n      onRefresh(page) {\r\n        this.$emit('refresh', page.path, page)\r\n      },\r\n      onContextmenu(pageKey, e) {\r\n        this.$emit('contextmenu', pageKey, e)\r\n      },\r\n      pageName(page) {\r\n        const pagePath = page.fullPath.split('?')[0]\r\n        const custom = this.customTitles.find(item => item.path === pagePath)\r\n        return (custom && custom.title) || page.title || this.$t(getI18nKey(page.keyPath))\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n  .tab{\r\n    margin: 0 -16px;\r\n    padding: 0 16px;\r\n    font-size: 14px;\r\n    user-select: none;\r\n    transition: all 0.2s;\r\n    .title{\r\n      display: inline-block;\r\n      height: 100%;\r\n    }\r\n    .icon-close{\r\n      font-size: 12px;\r\n      margin-left: 6px;\r\n      margin-right: -4px !important;\r\n      color: @text-color-second;\r\n      &:hover{\r\n        color: @text-color;\r\n      }\r\n    }\r\n    .icon-sync{\r\n      margin-left: -4px;\r\n      color: @primary-4;\r\n      transition: all 0.3s ease-in-out;\r\n      &:hover{\r\n        color: @primary-color;\r\n      }\r\n      font-size: 14px;\r\n      &.hide{\r\n        font-size: 0;\r\n      }\r\n    }\r\n  }\r\n  .tabs-head{\r\n    margin: 0 auto;\r\n    &.head.fixed{\r\n      width: 1400px;\r\n    }\r\n  }\r\n  .tabs-container{\r\n    margin: -16px auto 8px;\r\n    transition: top,left 0.2s;\r\n    .header-lock{\r\n      font-size: 18px;\r\n      cursor: pointer;\r\n      color: @primary-3;\r\n      &:hover{\r\n        color: @primary-color;\r\n      }\r\n    }\r\n    &.affixed{\r\n      margin: 0 auto;\r\n      top: 0px;\r\n      padding: 8px 24px 0;\r\n      position: fixed;\r\n      height: 48px;\r\n      z-index: 1;\r\n      background-color: @layout-body-background;\r\n      &.side,&.mix{\r\n        right: 0;\r\n        left: 256px;\r\n        &.collapsed{\r\n          left: 80px;\r\n        }\r\n      }\r\n      &.head{\r\n        width: inherit;\r\n        padding: 8px 0 0;\r\n        &.fluid{\r\n          left: 0;\r\n          right: 0;\r\n          padding: 8px 24px 0;\r\n        }\r\n      }\r\n      &.fixed-header{\r\n        top: 64px;\r\n      }\r\n    }\r\n  }\r\n  .virtual-tabs{\r\n    height: 48px;\r\n  }\r\n</style>\r\n"]}]}