{"remainingRequest":"D:\\ServerPlatformWeb\\node_modules\\babel-loader\\lib\\index.js!D:\\ServerPlatformWeb\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\ServerPlatformWeb\\src\\utils\\axios-interceptors.js","dependencies":[{"path":"D:\\ServerPlatformWeb\\src\\utils\\axios-interceptors.js","mtime":1649217944444},{"path":"D:\\ServerPlatformWeb\\babel.config.js","mtime":1649217944413},{"path":"D:\\ServerPlatformWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ServerPlatformWeb\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\ServerPlatformWeb\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBDb29raWUgZnJvbSAnanMtY29va2llJzsgLy8gNDAx5oum5oiqCgp2YXIgcmVzcDQwMSA9IHsKICAvKioNCiAgICog5ZON5bqU5pWw5o2u5LmL5YmN5YGa54K55LuA5LmIDQogICAqIEBwYXJhbSByZXNwb25zZSDlk43lupTlr7nosaENCiAgICogQHBhcmFtIG9wdGlvbnMg5bqU55So6YWN572uIOWMheWQqzoge3JvdXRlciwgaTE4biwgc3RvcmUsIG1lc3NhZ2V9DQogICAqIEByZXR1cm5zIHsqfQ0KICAgKi8KICBvbkZ1bGZpbGxlZDogZnVuY3Rpb24gb25GdWxmaWxsZWQocmVzcG9uc2UsIG9wdGlvbnMpIHsKICAgIHZhciBtZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlOwoKICAgIGlmIChyZXNwb25zZS5jb2RlID09PSA0MDEpIHsKICAgICAgbWVzc2FnZS5lcnJvcign5peg5q2k5p2D6ZmQJyk7CiAgICB9CgogICAgcmV0dXJuIHJlc3BvbnNlOwogIH0sCgogIC8qKg0KICAgKiDlk43lupTlh7rplJnml7bmiafooYwNCiAgICogQHBhcmFtIGVycm9yIOmUmeivr+WvueixoQ0KICAgKiBAcGFyYW0gb3B0aW9ucyDlupTnlKjphY3nva4g5YyF5ZCrOiB7cm91dGVyLCBpMThuLCBzdG9yZSwgbWVzc2FnZX0NCiAgICogQHJldHVybnMge1Byb21pc2U8bmV2ZXI+fQ0KICAgKi8KICBvblJlamVjdGVkOiBmdW5jdGlvbiBvblJlamVjdGVkKGVycm9yLCBvcHRpb25zKSB7CiAgICB2YXIgbWVzc2FnZSA9IG9wdGlvbnMubWVzc2FnZTsKICAgIHZhciByZXNwb25zZSA9IGVycm9yLnJlc3BvbnNlOwoKICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgICBtZXNzYWdlLmVycm9yKCfml6DmraTmnYPpmZAnKTsKICAgIH0KCiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogIH0KfTsKdmFyIHJlc3A0MDMgPSB7CiAgb25GdWxmaWxsZWQ6IGZ1bmN0aW9uIG9uRnVsZmlsbGVkKHJlc3BvbnNlLCBvcHRpb25zKSB7CiAgICB2YXIgbWVzc2FnZSA9IG9wdGlvbnMubWVzc2FnZTsKCiAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gNDAzKSB7CiAgICAgIG1lc3NhZ2UuZXJyb3IoJ+ivt+axguiiq+aLkue7nScpOwogICAgfQoKICAgIHJldHVybiByZXNwb25zZTsKICB9LAogIG9uUmVqZWN0ZWQ6IGZ1bmN0aW9uIG9uUmVqZWN0ZWQoZXJyb3IsIG9wdGlvbnMpIHsKICAgIHZhciBtZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlOwogICAgdmFyIHJlc3BvbnNlID0gZXJyb3IucmVzcG9uc2U7CgogICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAzKSB7CiAgICAgIG1lc3NhZ2UuZXJyb3IoJ+ivt+axguiiq+aLkue7nScpOwogICAgfQoKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgfQp9Owp2YXIgcmVxQ29tbW9uID0gewogIC8qKg0KICAgKiDlj5HpgIHor7fmsYLkuYvliY3lgZrkupvku4DkuYgNCiAgICogQHBhcmFtIGNvbmZpZyBheGlvcyBjb25maWcNCiAgICogQHBhcmFtIG9wdGlvbnMg5bqU55So6YWN572uIOWMheWQqzoge3JvdXRlciwgaTE4biwgc3RvcmUsIG1lc3NhZ2V9DQogICAqIEByZXR1cm5zIHsqfQ0KICAgKi8KICBvbkZ1bGZpbGxlZDogZnVuY3Rpb24gb25GdWxmaWxsZWQoY29uZmlnLCBvcHRpb25zKSB7CiAgICB2YXIgbWVzc2FnZSA9IG9wdGlvbnMubWVzc2FnZTsKICAgIHZhciB1cmwgPSBjb25maWcudXJsLAogICAgICAgIHhzcmZDb29raWVOYW1lID0gY29uZmlnLnhzcmZDb29raWVOYW1lOwoKICAgIGlmICh1cmwuaW5kZXhPZignbG9naW4nKSA9PT0gLTEgJiYgeHNyZkNvb2tpZU5hbWUgJiYgIUNvb2tpZS5nZXQoeHNyZkNvb2tpZU5hbWUpKSB7CiAgICAgIG1lc3NhZ2Uud2FybmluZygn6K6k6K+BIHRva2VuIOW3sui/h+acn++8jOivt+mHjeaWsOeZu+W9lScpOwogICAgfQoKICAgIHJldHVybiBjb25maWc7CiAgfSwKCiAgLyoqDQogICAqIOivt+axguWHuumUmeaXtuWBmueCueS7gOS5iA0KICAgKiBAcGFyYW0gZXJyb3Ig6ZSZ6K+v5a+56LGhDQogICAqIEBwYXJhbSBvcHRpb25zIOW6lOeUqOmFjee9riDljIXlkKs6IHtyb3V0ZXIsIGkxOG4sIHN0b3JlLCBtZXNzYWdlfQ0KICAgKiBAcmV0dXJucyB7UHJvbWlzZTxuZXZlcj59DQogICAqLwogIG9uUmVqZWN0ZWQ6IGZ1bmN0aW9uIG9uUmVqZWN0ZWQoZXJyb3IsIG9wdGlvbnMpIHsKICAgIHZhciBtZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlOwogICAgbWVzc2FnZS5lcnJvcihlcnJvci5tZXNzYWdlKTsKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgcmVxdWVzdDogW3JlcUNvbW1vbl0sCiAgLy8g6K+35rGC5oum5oiqCiAgcmVzcG9uc2U6IFtyZXNwNDAxLCByZXNwNDAzXSAvLyDlk43lupTmi6bmiKoKCn07"},{"version":3,"sources":["D:/ServerPlatformWeb/src/utils/axios-interceptors.js"],"names":["Cookie","resp401","onFulfilled","response","options","message","code","error","onRejected","status","Promise","reject","resp403","reqCommon","config","url","xsrfCookieName","indexOf","get","warning","request"],"mappings":";AAAA,OAAOA,MAAP,MAAmB,WAAnB,C,CACA;;AACA,IAAMC,OAAO,GAAG;AACd;AACF;AACA;AACA;AACA;AACA;AACEC,EAAAA,WAPc,uBAOFC,QAPE,EAOQC,OAPR,EAOiB;AAC7B,QAAOC,OAAP,GAAkBD,OAAlB,CAAOC,OAAP;;AACA,QAAIF,QAAQ,CAACG,IAAT,KAAkB,GAAtB,EAA2B;AACzBD,MAAAA,OAAO,CAACE,KAAR,CAAc,MAAd;AACD;;AACD,WAAOJ,QAAP;AACD,GAba;;AAcd;AACF;AACA;AACA;AACA;AACA;AACEK,EAAAA,UApBc,sBAoBHD,KApBG,EAoBIH,OApBJ,EAoBa;AACzB,QAAOC,OAAP,GAAkBD,OAAlB,CAAOC,OAAP;AACA,QAAOF,QAAP,GAAmBI,KAAnB,CAAOJ,QAAP;;AACA,QAAIA,QAAQ,CAACM,MAAT,KAAoB,GAAxB,EAA6B;AAC3BJ,MAAAA,OAAO,CAACE,KAAR,CAAc,MAAd;AACD;;AACD,WAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD;AA3Ba,CAAhB;AA8BA,IAAMK,OAAO,GAAG;AACdV,EAAAA,WADc,uBACFC,QADE,EACQC,OADR,EACiB;AAC7B,QAAOC,OAAP,GAAkBD,OAAlB,CAAOC,OAAP;;AACA,QAAIF,QAAQ,CAACG,IAAT,KAAkB,GAAtB,EAA2B;AACzBD,MAAAA,OAAO,CAACE,KAAR,CAAc,OAAd;AACD;;AACD,WAAOJ,QAAP;AACD,GAPa;AAQdK,EAAAA,UARc,sBAQHD,KARG,EAQIH,OARJ,EAQa;AACzB,QAAOC,OAAP,GAAkBD,OAAlB,CAAOC,OAAP;AACA,QAAOF,QAAP,GAAmBI,KAAnB,CAAOJ,QAAP;;AACA,QAAIA,QAAQ,CAACM,MAAT,KAAoB,GAAxB,EAA6B;AAC3BJ,MAAAA,OAAO,CAACE,KAAR,CAAc,OAAd;AACD;;AACD,WAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD;AAfa,CAAhB;AAkBA,IAAMM,SAAS,GAAG;AAChB;AACF;AACA;AACA;AACA;AACA;AACEX,EAAAA,WAPgB,uBAOJY,MAPI,EAOIV,OAPJ,EAOa;AAC3B,QAAOC,OAAP,GAAkBD,OAAlB,CAAOC,OAAP;AACA,QAAOU,GAAP,GAA8BD,MAA9B,CAAOC,GAAP;AAAA,QAAYC,cAAZ,GAA8BF,MAA9B,CAAYE,cAAZ;;AACA,QAAID,GAAG,CAACE,OAAJ,CAAY,OAAZ,MAAyB,CAAC,CAA1B,IAA+BD,cAA/B,IAAiD,CAAChB,MAAM,CAACkB,GAAP,CAAWF,cAAX,CAAtD,EAAkF;AAChFX,MAAAA,OAAO,CAACc,OAAR,CAAgB,oBAAhB;AACD;;AACD,WAAOL,MAAP;AACD,GAde;;AAehB;AACF;AACA;AACA;AACA;AACA;AACEN,EAAAA,UArBgB,sBAqBLD,KArBK,EAqBEH,OArBF,EAqBW;AACzB,QAAOC,OAAP,GAAkBD,OAAlB,CAAOC,OAAP;AACAA,IAAAA,OAAO,CAACE,KAAR,CAAcA,KAAK,CAACF,OAApB;AACA,WAAOK,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD;AAzBe,CAAlB;AA4BA,eAAe;AACba,EAAAA,OAAO,EAAE,CAACP,SAAD,CADI;AACS;AACtBV,EAAAA,QAAQ,EAAE,CAACF,OAAD,EAAUW,OAAV,CAFG,CAEgB;;AAFhB,CAAf","sourcesContent":["import Cookie from 'js-cookie'\r\n// 401拦截\r\nconst resp401 = {\r\n  /**\r\n   * 响应数据之前做点什么\r\n   * @param response 响应对象\r\n   * @param options 应用配置 包含: {router, i18n, store, message}\r\n   * @returns {*}\r\n   */\r\n  onFulfilled(response, options) {\r\n    const {message} = options\r\n    if (response.code === 401) {\r\n      message.error('无此权限')\r\n    }\r\n    return response\r\n  },\r\n  /**\r\n   * 响应出错时执行\r\n   * @param error 错误对象\r\n   * @param options 应用配置 包含: {router, i18n, store, message}\r\n   * @returns {Promise<never>}\r\n   */\r\n  onRejected(error, options) {\r\n    const {message} = options\r\n    const {response} = error\r\n    if (response.status === 401) {\r\n      message.error('无此权限')\r\n    }\r\n    return Promise.reject(error)\r\n  }\r\n}\r\n\r\nconst resp403 = {\r\n  onFulfilled(response, options) {\r\n    const {message} = options\r\n    if (response.code === 403) {\r\n      message.error('请求被拒绝')\r\n    }\r\n    return response\r\n  },\r\n  onRejected(error, options) {\r\n    const {message} = options\r\n    const {response} = error\r\n    if (response.status === 403) {\r\n      message.error('请求被拒绝')\r\n    }\r\n    return Promise.reject(error)\r\n  }\r\n}\r\n\r\nconst reqCommon = {\r\n  /**\r\n   * 发送请求之前做些什么\r\n   * @param config axios config\r\n   * @param options 应用配置 包含: {router, i18n, store, message}\r\n   * @returns {*}\r\n   */\r\n  onFulfilled(config, options) {\r\n    const {message} = options\r\n    const {url, xsrfCookieName} = config\r\n    if (url.indexOf('login') === -1 && xsrfCookieName && !Cookie.get(xsrfCookieName)) {\r\n      message.warning('认证 token 已过期，请重新登录')\r\n    }\r\n    return config\r\n  },\r\n  /**\r\n   * 请求出错时做点什么\r\n   * @param error 错误对象\r\n   * @param options 应用配置 包含: {router, i18n, store, message}\r\n   * @returns {Promise<never>}\r\n   */\r\n  onRejected(error, options) {\r\n    const {message} = options\r\n    message.error(error.message)\r\n    return Promise.reject(error)\r\n  }\r\n}\r\n\r\nexport default {\r\n  request: [reqCommon], // 请求拦截\r\n  response: [resp401, resp403] // 响应拦截\r\n}\r\n"]}]}