{"remainingRequest":"D:\\ServerPlatformWeb\\node_modules\\babel-loader\\lib\\index.js!D:\\ServerPlatformWeb\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\ServerPlatformWeb\\src\\components\\cache\\AKeepAlive.js","dependencies":[{"path":"D:\\ServerPlatformWeb\\src\\components\\cache\\AKeepAlive.js","mtime":1649217944428},{"path":"D:\\ServerPlatformWeb\\babel.config.js","mtime":1649217944413},{"path":"D:\\ServerPlatformWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ServerPlatformWeb\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\ServerPlatformWeb\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkQ6L1NlcnZlclBsYXRmb3JtV2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmRvdC1hbGwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5zdGlja3kuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRlc3QuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IHsgaXNEZWYsIGlzUmVnRXhwLCByZW1vdmUgfSBmcm9tICdAL3V0aWxzL3V0aWwnOwp2YXIgcGF0dGVyblR5cGVzID0gW1N0cmluZywgUmVnRXhwLCBBcnJheV07CgpmdW5jdGlvbiBtYXRjaGVzKHBhdHRlcm4sIG5hbWUpIHsKICBpZiAoQXJyYXkuaXNBcnJheShwYXR0ZXJuKSkgewogICAgaWYgKHBhdHRlcm4uaW5kZXhPZihuYW1lKSA+IC0xKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSBlbHNlIHsKICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHBhdHRlcm4pLAogICAgICAgICAgX3N0ZXA7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgaXRlbSA9IF9zdGVwLnZhbHVlOwoKICAgICAgICAgIGlmIChpc1JlZ0V4cChpdGVtKSAmJiBpdGVtLnRlc3QobmFtZSkpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9IGVsc2UgaWYgKHR5cGVvZiBwYXR0ZXJuID09PSAnc3RyaW5nJykgewogICAgcmV0dXJuIHBhdHRlcm4uc3BsaXQoJywnKS5pbmRleE9mKG5hbWUpID4gLTE7CiAgfSBlbHNlIGlmIChpc1JlZ0V4cChwYXR0ZXJuKSkgewogICAgcmV0dXJuIHBhdHRlcm4udGVzdChuYW1lKTsKICB9CiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KCgogIHJldHVybiBmYWxzZTsKfQoKZnVuY3Rpb24gZ2V0Q29tcG9uZW50TmFtZShvcHRzKSB7CiAgcmV0dXJuIG9wdHMgJiYgKG9wdHMuQ3Rvci5vcHRpb25zLm5hbWUgfHwgb3B0cy50YWcpOwp9CgpmdW5jdGlvbiBnZXRDb21wb25lbnRLZXkodm5vZGUpIHsKICB2YXIgY29tcG9uZW50T3B0aW9ucyA9IHZub2RlLmNvbXBvbmVudE9wdGlvbnMsCiAgICAgIGtleSA9IHZub2RlLmtleTsKICByZXR1cm4ga2V5ID09IG51bGwgPyBjb21wb25lbnRPcHRpb25zLkN0b3IuY2lkICsgKGNvbXBvbmVudE9wdGlvbnMudGFnID8gIjo6Ii5jb25jYXQoY29tcG9uZW50T3B0aW9ucy50YWcpIDogJycpIDoga2V5ICsgY29tcG9uZW50T3B0aW9ucy5DdG9yLmNpZDsKfQoKZnVuY3Rpb24gZ2V0Rmlyc3RDb21wb25lbnRDaGlsZChjaGlsZHJlbikgewogIGlmIChBcnJheS5pc0FycmF5KGNoaWxkcmVuKSkgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykgewogICAgICB2YXIgYyA9IGNoaWxkcmVuW2ldOwoKICAgICAgaWYgKGlzRGVmKGMpICYmIChpc0RlZihjLmNvbXBvbmVudE9wdGlvbnMpIHx8IGMuaXNBc3luY1BsYWNlaG9sZGVyKSkgewogICAgICAgIHJldHVybiBjOwogICAgICB9CiAgICB9CiAgfQp9CgpmdW5jdGlvbiBwcnVuZUNhY2hlKGtlZXBBbGl2ZUluc3RhbmNlLCBmaWx0ZXIpIHsKICB2YXIgY2FjaGUgPSBrZWVwQWxpdmVJbnN0YW5jZS5jYWNoZSwKICAgICAga2V5cyA9IGtlZXBBbGl2ZUluc3RhbmNlLmtleXMsCiAgICAgIF92bm9kZSA9IGtlZXBBbGl2ZUluc3RhbmNlLl92bm9kZTsKCiAgZm9yICh2YXIga2V5IGluIGNhY2hlKSB7CiAgICB2YXIgY2FjaGVkTm9kZSA9IGNhY2hlW2tleV07CgogICAgaWYgKGNhY2hlZE5vZGUpIHsKICAgICAgdmFyIG5hbWUgPSBnZXRDb21wb25lbnROYW1lKGNhY2hlZE5vZGUuY29tcG9uZW50T3B0aW9ucyk7CiAgICAgIHZhciBjb21wb25lbnRLZXkgPSBnZXRDb21wb25lbnRLZXkoY2FjaGVkTm9kZSk7CgogICAgICBpZiAobmFtZSAmJiAhZmlsdGVyKG5hbWUsIGNvbXBvbmVudEtleSkpIHsKICAgICAgICBwcnVuZUNhY2hlRW50cnkoY2FjaGUsIGtleSwga2V5cywgX3Zub2RlKTsKICAgICAgfQogICAgfQogIH0KfQoKZnVuY3Rpb24gcHJ1bmVDYWNoZUVudHJ5MihjYWNoZSwga2V5LCBrZXlzKSB7CiAgdmFyIGNhY2hlZCA9IGNhY2hlW2tleV07CgogIGlmIChjYWNoZWQpIHsKICAgIGNhY2hlZC5jb21wb25lbnRJbnN0YW5jZS4kZGVzdHJveSgpOwogIH0KCiAgY2FjaGVba2V5XSA9IG51bGw7CiAgcmVtb3ZlKGtleXMsIGtleSk7Cn0KCmZ1bmN0aW9uIHBydW5lQ2FjaGVFbnRyeShjYWNoZSwga2V5LCBrZXlzLCBjdXJyZW50KSB7CiAgdmFyIGNhY2hlZCA9IGNhY2hlW2tleV07CgogIGlmIChjYWNoZWQgJiYgKCFjdXJyZW50IHx8IGNhY2hlZC50YWcgIT09IGN1cnJlbnQudGFnKSkgewogICAgY2FjaGVkLmNvbXBvbmVudEluc3RhbmNlLiRkZXN0cm95KCk7CiAgfQoKICBjYWNoZVtrZXldID0gbnVsbDsKICByZW1vdmUoa2V5cywga2V5KTsKfQoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBS2VlcEFsaXZlJywKICBhYnN0cmFjdDogdHJ1ZSwKICBtb2RlbDogewogICAgcHJvcDogJ2NsZWFyQ2FjaGVzJywKICAgIGV2ZW50OiAnY2xlYXInCiAgfSwKICBwcm9wczogewogICAgaW5jbHVkZTogcGF0dGVyblR5cGVzLAogICAgZXhjbHVkZTogcGF0dGVyblR5cGVzLAogICAgZXhjbHVkZUtleXM6IHBhdHRlcm5UeXBlcywKICAgIG1heDogW1N0cmluZywgTnVtYmVyXSwKICAgIGNsZWFyQ2FjaGVzOiBBcnJheQogIH0sCiAgd2F0Y2g6IHsKICAgIGNsZWFyQ2FjaGVzOiBmdW5jdGlvbiBjbGVhckNhY2hlcyh2YWwpIHsKICAgICAgaWYgKHZhbCAmJiB2YWwubGVuZ3RoID4gMCkgewogICAgICAgIHZhciBjYWNoZSA9IHRoaXMuY2FjaGUsCiAgICAgICAgICAgIGtleXMgPSB0aGlzLmtleXM7CiAgICAgICAgdmFsLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgcHJ1bmVDYWNoZUVudHJ5MihjYWNoZSwga2V5LCBrZXlzKTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLiRlbWl0KCdjbGVhcicsIFtdKTsKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgdGhpcy5rZXlzID0gW107CiAgfSwKICBkZXN0cm95ZWQ6IGZ1bmN0aW9uIGRlc3Ryb3llZCgpIHsKICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmNhY2hlKSB7CiAgICAgIHBydW5lQ2FjaGVFbnRyeSh0aGlzLmNhY2hlLCBrZXksIHRoaXMua2V5cyk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLiR3YXRjaCgnaW5jbHVkZScsIGZ1bmN0aW9uICh2YWwpIHsKICAgICAgcHJ1bmVDYWNoZShfdGhpcywgZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICByZXR1cm4gbWF0Y2hlcyh2YWwsIG5hbWUpOwogICAgICB9KTsKICAgIH0pOwogICAgdGhpcy4kd2F0Y2goJ2V4Y2x1ZGUnLCBmdW5jdGlvbiAodmFsKSB7CiAgICAgIHBydW5lQ2FjaGUoX3RoaXMsIGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgcmV0dXJuICFtYXRjaGVzKHZhbCwgbmFtZSk7CiAgICAgIH0pOwogICAgfSk7CiAgICB0aGlzLiR3YXRjaCgnZXhjbHVkZUtleXMnLCBmdW5jdGlvbiAodmFsKSB7CiAgICAgIHBydW5lQ2FjaGUoX3RoaXMsIGZ1bmN0aW9uIChuYW1lLCBrZXkpIHsKICAgICAgICByZXR1cm4gIW1hdGNoZXModmFsLCBrZXkpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICB2YXIgc2xvdCA9IHRoaXMuJHNsb3RzLmRlZmF1bHQ7CiAgICB2YXIgdm5vZGUgPSBnZXRGaXJzdENvbXBvbmVudENoaWxkKHNsb3QpOwogICAgdmFyIGNvbXBvbmVudE9wdGlvbnMgPSB2bm9kZSAmJiB2bm9kZS5jb21wb25lbnRPcHRpb25zOwoKICAgIGlmIChjb21wb25lbnRPcHRpb25zKSB7CiAgICAgIC8vIGNoZWNrIHBhdHRlcm4KICAgICAgdmFyIG5hbWUgPSBnZXRDb21wb25lbnROYW1lKGNvbXBvbmVudE9wdGlvbnMpOwogICAgICB2YXIgY29tcG9uZW50S2V5ID0gZ2V0Q29tcG9uZW50S2V5KHZub2RlKTsKICAgICAgdmFyIGluY2x1ZGUgPSB0aGlzLmluY2x1ZGUsCiAgICAgICAgICBleGNsdWRlID0gdGhpcy5leGNsdWRlLAogICAgICAgICAgZXhjbHVkZUtleXMgPSB0aGlzLmV4Y2x1ZGVLZXlzOwoKICAgICAgaWYgKCAvLyBub3QgaW5jbHVkZWQKICAgICAgaW5jbHVkZSAmJiAoIW5hbWUgfHwgIW1hdGNoZXMoaW5jbHVkZSwgbmFtZSkpIHx8IC8vIGV4Y2x1ZGVkCiAgICAgIGV4Y2x1ZGUgJiYgbmFtZSAmJiBtYXRjaGVzKGV4Y2x1ZGUsIG5hbWUpIHx8IGV4Y2x1ZGVLZXlzICYmIGNvbXBvbmVudEtleSAmJiBtYXRjaGVzKGV4Y2x1ZGVLZXlzLCBjb21wb25lbnRLZXkpKSB7CiAgICAgICAgcmV0dXJuIHZub2RlOwogICAgICB9CgogICAgICB2YXIgY2FjaGUgPSB0aGlzLmNhY2hlLAogICAgICAgICAga2V5cyA9IHRoaXMua2V5czsKICAgICAgdmFyIGtleSA9IHZub2RlLmtleSA9PSBudWxsIC8vIHNhbWUgY29uc3RydWN0b3IgbWF5IGdldCByZWdpc3RlcmVkIGFzIGRpZmZlcmVudCBsb2NhbCBjb21wb25lbnRzCiAgICAgIC8vIHNvIGNpZCBhbG9uZSBpcyBub3QgZW5vdWdoICgjMzI2OSkKICAgICAgPyBjb21wb25lbnRPcHRpb25zLkN0b3IuY2lkICsgKGNvbXBvbmVudE9wdGlvbnMudGFnID8gIjo6Ii5jb25jYXQoY29tcG9uZW50T3B0aW9ucy50YWcpIDogJycpIDogdm5vZGUua2V5ICsgY29tcG9uZW50T3B0aW9ucy5DdG9yLmNpZDsKCiAgICAgIGlmIChjYWNoZVtrZXldKSB7CiAgICAgICAgdm5vZGUuY29tcG9uZW50SW5zdGFuY2UgPSBjYWNoZVtrZXldLmNvbXBvbmVudEluc3RhbmNlOyAvLyBtYWtlIGN1cnJlbnQga2V5IGZyZXNoZXN0CgogICAgICAgIHJlbW92ZShrZXlzLCBrZXkpOwogICAgICAgIGtleXMucHVzaChrZXkpOwogICAgICB9IGVsc2UgewogICAgICAgIGNhY2hlW2tleV0gPSB2bm9kZTsKICAgICAgICBrZXlzLnB1c2goa2V5KTsgLy8gcHJ1bmUgb2xkZXN0IGVudHJ5CgogICAgICAgIGlmICh0aGlzLm1heCAmJiBrZXlzLmxlbmd0aCA+IHBhcnNlSW50KHRoaXMubWF4KSkgewogICAgICAgICAgcHJ1bmVDYWNoZUVudHJ5KGNhY2hlLCBrZXlzWzBdLCBrZXlzLCB0aGlzLl92bm9kZSk7CiAgICAgICAgfQogICAgICB9CgogICAgICB2bm9kZS5kYXRhLmtlZXBBbGl2ZSA9IHRydWU7CiAgICB9CgogICAgcmV0dXJuIHZub2RlIHx8IHNsb3QgJiYgc2xvdFswXTsKICB9Cn07"},{"version":3,"sources":["D:/ServerPlatformWeb/src/components/cache/AKeepAlive.js"],"names":["isDef","isRegExp","remove","patternTypes","String","RegExp","Array","matches","pattern","name","isArray","indexOf","item","test","split","getComponentName","opts","Ctor","options","tag","getComponentKey","vnode","componentOptions","key","cid","getFirstComponentChild","children","i","length","c","isAsyncPlaceholder","pruneCache","keepAliveInstance","filter","cache","keys","_vnode","cachedNode","componentKey","pruneCacheEntry","pruneCacheEntry2","cached","componentInstance","$destroy","current","abstract","model","prop","event","props","include","exclude","excludeKeys","max","Number","clearCaches","watch","val","forEach","$emit","created","Object","create","destroyed","mounted","$watch","render","slot","$slots","default","push","parseInt","data","keepAlive"],"mappings":"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","sourcesContent":["import {isDef, isRegExp, remove} from '@/utils/util'\r\n\r\nconst patternTypes = [String, RegExp, Array]\r\n\r\nfunction matches (pattern, name) {\r\n  if (Array.isArray(pattern)) {\r\n    if (pattern.indexOf(name) > -1) {\r\n      return true\r\n    } else {\r\n      for (let item of pattern) {\r\n        if (isRegExp(item) && item.test(name)) {\r\n          return true\r\n        }\r\n      }\r\n      return false\r\n    }\r\n  } else if (typeof pattern === 'string') {\r\n    return pattern.split(',').indexOf(name) > -1\r\n  } else if (isRegExp(pattern)) {\r\n    return pattern.test(name)\r\n  }\r\n  /* istanbul ignore next */\r\n  return false\r\n}\r\n\r\nfunction getComponentName (opts) {\r\n  return opts && (opts.Ctor.options.name || opts.tag)\r\n}\r\n\r\nfunction getComponentKey (vnode) {\r\n  const {componentOptions, key} = vnode\r\n  return key == null\r\n    ? componentOptions.Ctor.cid + (componentOptions.tag ? `::${componentOptions.tag}` : '')\r\n    : key + componentOptions.Ctor.cid\r\n}\r\n\r\nfunction getFirstComponentChild (children) {\r\n  if (Array.isArray(children)) {\r\n    for (let i = 0; i < children.length; i++) {\r\n      const c = children[i]\r\n      if (isDef(c) && (isDef(c.componentOptions) || c.isAsyncPlaceholder)) {\r\n        return c\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction pruneCache (keepAliveInstance, filter) {\r\n  const { cache, keys, _vnode } = keepAliveInstance\r\n  for (const key in cache) {\r\n    const cachedNode = cache[key]\r\n    if (cachedNode) {\r\n      const name = getComponentName(cachedNode.componentOptions)\r\n      const componentKey = getComponentKey(cachedNode)\r\n      if (name && !filter(name, componentKey)) {\r\n        pruneCacheEntry(cache, key, keys, _vnode)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction pruneCacheEntry2(cache, key, keys) {\r\n  const cached = cache[key]\r\n  if (cached) {\r\n    cached.componentInstance.$destroy()\r\n  }\r\n  cache[key] = null\r\n  remove(keys, key)\r\n}\r\n\r\nfunction pruneCacheEntry (cache, key, keys, current) {\r\n  const cached = cache[key]\r\n  if (cached && (!current || cached.tag !== current.tag)) {\r\n    cached.componentInstance.$destroy()\r\n  }\r\n  cache[key] = null\r\n  remove(keys, key)\r\n}\r\n\r\nexport default {\r\n  name: 'AKeepAlive',\r\n  abstract: true,\r\n  model: {\r\n    prop: 'clearCaches',\r\n    event: 'clear',\r\n  },\r\n  props: {\r\n    include: patternTypes,\r\n    exclude: patternTypes,\r\n    excludeKeys: patternTypes,\r\n    max: [String, Number],\r\n    clearCaches: Array\r\n  },\r\n  watch: {\r\n    clearCaches: function(val) {\r\n      if (val && val.length > 0) {\r\n        const {cache, keys} = this\r\n        val.forEach(key => {\r\n          pruneCacheEntry2(cache, key, keys)\r\n        })\r\n        this.$emit('clear', [])\r\n      }\r\n    }\r\n  },\r\n\r\n  created() {\r\n    this.cache = Object.create(null)\r\n    this.keys = []\r\n  },\r\n\r\n  destroyed () {\r\n    for (const key in this.cache) {\r\n      pruneCacheEntry(this.cache, key, this.keys)\r\n    }\r\n  },\r\n\r\n  mounted () {\r\n    this.$watch('include', val => {\r\n      pruneCache(this, (name) => matches(val, name))\r\n    })\r\n    this.$watch('exclude', val => {\r\n      pruneCache(this, (name) => !matches(val, name))\r\n    })\r\n    this.$watch('excludeKeys', val => {\r\n      pruneCache(this, (name, key) => !matches(val, key))\r\n    })\r\n  },\r\n\r\n  render () {\r\n    const slot = this.$slots.default\r\n    const vnode = getFirstComponentChild(slot)\r\n    const componentOptions = vnode && vnode.componentOptions\r\n    if (componentOptions) {\r\n      // check pattern\r\n      const name = getComponentName(componentOptions)\r\n      const componentKey = getComponentKey(vnode)\r\n      const { include, exclude, excludeKeys } = this\r\n      if (\r\n        // not included\r\n        (include && (!name || !matches(include, name))) ||\r\n        // excluded\r\n        (exclude && name && matches(exclude, name)) ||\r\n        (excludeKeys && componentKey && matches(excludeKeys, componentKey))\r\n      ) {\r\n        return vnode\r\n      }\r\n\r\n      const { cache, keys } = this\r\n      const key = vnode.key == null\r\n        // same constructor may get registered as different local components\r\n        // so cid alone is not enough (#3269)\r\n        ? componentOptions.Ctor.cid + (componentOptions.tag ? `::${componentOptions.tag}` : '')\r\n        : vnode.key + componentOptions.Ctor.cid\r\n      if (cache[key]) {\r\n        vnode.componentInstance = cache[key].componentInstance\r\n        // make current key freshest\r\n        remove(keys, key)\r\n        keys.push(key)\r\n      } else {\r\n        cache[key] = vnode\r\n        keys.push(key)\r\n        // prune oldest entry\r\n        if (this.max && keys.length > parseInt(this.max)) {\r\n          pruneCacheEntry(cache, keys[0], keys, this._vnode)\r\n        }\r\n      }\r\n\r\n      vnode.data.keepAlive = true\r\n    }\r\n    return vnode || (slot && slot[0])\r\n  }\r\n}\r\n"]}]}