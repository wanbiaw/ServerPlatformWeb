{"remainingRequest":"D:\\ServerPlatformWeb\\node_modules\\babel-loader\\lib\\index.js!D:\\ServerPlatformWeb\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\ServerPlatformWeb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ServerPlatformWeb\\src\\layouts\\tabs\\TabsView.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ServerPlatformWeb\\src\\layouts\\tabs\\TabsView.vue","mtime":1649217944428},{"path":"D:\\ServerPlatformWeb\\babel.config.js","mtime":1649217944413},{"path":"D:\\ServerPlatformWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ServerPlatformWeb\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\ServerPlatformWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ServerPlatformWeb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovU2VydmVyUGxhdGZvcm1XZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmRvdC1hbGwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuc3RpY2t5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBBZG1pbkxheW91dCBmcm9tICdAL2xheW91dHMvQWRtaW5MYXlvdXQnOwppbXBvcnQgQ29udGV4dG1lbnUgZnJvbSAnQC9jb21wb25lbnRzL21lbnUvQ29udGV4dG1lbnUnOwppbXBvcnQgUGFnZVRvZ2dsZVRyYW5zaXRpb24gZnJvbSAnQC9jb21wb25lbnRzL3RyYW5zaXRpb24vUGFnZVRvZ2dsZVRyYW5zaXRpb24nOwppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwTXV0YXRpb25zIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IGdldEkxOG5LZXkgfSBmcm9tICdAL3V0aWxzL3JvdXRlclV0aWwnOwppbXBvcnQgQUtlZXBBbGl2ZSBmcm9tICdAL2NvbXBvbmVudHMvY2FjaGUvQUtlZXBBbGl2ZSc7CmltcG9ydCBUYWJzSGVhZCBmcm9tICdAL2xheW91dHMvdGFicy9UYWJzSGVhZCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVGFic1ZpZXcnLAogIGkxOG46IHJlcXVpcmUoJy4vaTE4bicpLAogIGNvbXBvbmVudHM6IHsKICAgIFRhYnNIZWFkOiBUYWJzSGVhZCwKICAgIFBhZ2VUb2dnbGVUcmFuc2l0aW9uOiBQYWdlVG9nZ2xlVHJhbnNpdGlvbiwKICAgIENvbnRleHRtZW51OiBDb250ZXh0bWVudSwKICAgIEFkbWluTGF5b3V0OiBBZG1pbkxheW91dCwKICAgIEFLZWVwQWxpdmU6IEFLZWVwQWxpdmUKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjbGVhckNhY2hlczogW10sCiAgICAgIHBhZ2VMaXN0OiBbXSwKICAgICAgYWN0aXZlUGFnZTogJycsCiAgICAgIG1lbnVWaXNpYmxlOiBmYWxzZSwKICAgICAgcmVmcmVzaGluZzogZmFsc2UsCiAgICAgIGV4Y2x1ZGVLZXlzOiBbXQogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKCdzZXR0aW5nJywgWydtdWx0aVBhZ2UnLCAnY2FjaGVQYWdlJywgJ2FuaW1hdGUnLCAnbGF5b3V0JywgJ3BhZ2VXaWR0aCddKSksIHt9LCB7CiAgICBtZW51SXRlbUxpc3Q6IGZ1bmN0aW9uIG1lbnVJdGVtTGlzdCgpIHsKICAgICAgcmV0dXJuIFt7CiAgICAgICAga2V5OiAnMScsCiAgICAgICAgaWNvbjogJ3ZlcnRpY2FsLXJpZ2h0JywKICAgICAgICB0ZXh0OiB0aGlzLiR0KCdjbG9zZUxlZnQnKQogICAgICB9LCB7CiAgICAgICAga2V5OiAnMicsCiAgICAgICAgaWNvbjogJ3ZlcnRpY2FsLWxlZnQnLAogICAgICAgIHRleHQ6IHRoaXMuJHQoJ2Nsb3NlUmlnaHQnKQogICAgICB9LCB7CiAgICAgICAga2V5OiAnMycsCiAgICAgICAgaWNvbjogJ2Nsb3NlJywKICAgICAgICB0ZXh0OiB0aGlzLiR0KCdjbG9zZU90aGVycycpCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICc0JywKICAgICAgICBpY29uOiAnc3luYycsCiAgICAgICAgdGV4dDogdGhpcy4kdCgncmVmcmVzaCcpCiAgICAgIH1dOwogICAgfSwKICAgIHRhYnNPZmZzZXQ6IGZ1bmN0aW9uIHRhYnNPZmZzZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLm11bHRpUGFnZSA/IDI0IDogMDsKICAgIH0KICB9KSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzJCRyb3V0ZXIsCiAgICAgICAgX3RoaXMkJHJvdXRlciRvcHRpb25zLAogICAgICAgIF90aGlzID0gdGhpczsKCiAgICB0aGlzLmxvYWRDYWNoZUNvbmZpZygoX3RoaXMkJHJvdXRlciA9IHRoaXMuJHJvdXRlcikgPT09IG51bGwgfHwgX3RoaXMkJHJvdXRlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90aGlzJCRyb3V0ZXIkb3B0aW9ucyA9IF90aGlzJCRyb3V0ZXIub3B0aW9ucykgPT09IG51bGwgfHwgX3RoaXMkJHJvdXRlciRvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyQkcm91dGVyJG9wdGlvbnMucm91dGVzKTsKICAgIHRoaXMubG9hZENhY2hlZFRhYnMoKTsKICAgIHZhciByb3V0ZSA9IHRoaXMuJHJvdXRlOwoKICAgIGlmICh0aGlzLnBhZ2VMaXN0LmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICByZXR1cm4gaXRlbS5wYXRoID09PSByb3V0ZS5wYXRoOwogICAgfSkgPT09IC0xKSB7CiAgICAgIHRoaXMucGFnZUxpc3QucHVzaCh0aGlzLmNyZWF0ZVBhZ2Uocm91dGUpKTsKICAgIH0KCiAgICB0aGlzLmFjdGl2ZVBhZ2UgPSByb3V0ZS5wYXRoOwoKICAgIGlmICh0aGlzLm11bHRpUGFnZSkgewogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMuc2V0Q2FjaGVkS2V5KHJvdXRlKTsKICAgICAgfSk7CiAgICAgIHRoaXMuYWRkTGlzdGVuZXIoKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmNvcnJlY3RQYWdlTWluSGVpZ2h0KC10aGlzLnRhYnNPZmZzZXQpOwogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIoKTsKICAgIHRoaXMuY29ycmVjdFBhZ2VNaW5IZWlnaHQodGhpcy50YWJzT2Zmc2V0KTsKICB9LAogIHdhdGNoOiB7CiAgICAnJHJvdXRlci5vcHRpb25zLnJvdXRlcyc6IGZ1bmN0aW9uICRyb3V0ZXJPcHRpb25zUm91dGVzKHZhbCkgewogICAgICB0aGlzLmV4Y2x1ZGVLZXlzID0gW107CiAgICAgIHRoaXMubG9hZENhY2hlQ29uZmlnKHZhbCk7CiAgICB9LAogICAgJyRyb3V0ZSc6IGZ1bmN0aW9uICRyb3V0ZShuZXdSb3V0ZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuYWN0aXZlUGFnZSA9IG5ld1JvdXRlLnBhdGg7CiAgICAgIHZhciBwYWdlID0gdGhpcy5wYWdlTGlzdC5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0ucGF0aCA9PT0gbmV3Um91dGUucGF0aDsKICAgICAgfSk7CgogICAgICBpZiAoIXRoaXMubXVsdGlQYWdlKSB7CiAgICAgICAgdGhpcy5wYWdlTGlzdCA9IFt0aGlzLmNyZWF0ZVBhZ2UobmV3Um91dGUpXTsKICAgICAgfSBlbHNlIGlmIChwYWdlKSB7CiAgICAgICAgcGFnZS5mdWxsUGF0aCA9IG5ld1JvdXRlLmZ1bGxQYXRoOwogICAgICB9IGVsc2UgaWYgKCFwYWdlKSB7CiAgICAgICAgdGhpcy5wYWdlTGlzdC5wdXNoKHRoaXMuY3JlYXRlUGFnZShuZXdSb3V0ZSkpOwogICAgICB9CgogICAgICBpZiAodGhpcy5tdWx0aVBhZ2UpIHsKICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczIuc2V0Q2FjaGVkS2V5KG5ld1JvdXRlKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgICdtdWx0aVBhZ2UnOiBmdW5jdGlvbiBtdWx0aVBhZ2UobmV3VmFsKSB7CiAgICAgIGlmICghbmV3VmFsKSB7CiAgICAgICAgdGhpcy5wYWdlTGlzdCA9IFt0aGlzLmNyZWF0ZVBhZ2UodGhpcy4kcm91dGUpXTsKICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5hZGRMaXN0ZW5lcigpOwogICAgICB9CiAgICB9LAogICAgdGFic09mZnNldDogZnVuY3Rpb24gdGFic09mZnNldChuZXdWYWwsIG9sZFZhbCkgewogICAgICB0aGlzLmNvcnJlY3RQYWdlTWluSGVpZ2h0KG9sZFZhbCAtIG5ld1ZhbCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKHsKICAgIGNoYW5nZVBhZ2U6IGZ1bmN0aW9uIGNoYW5nZVBhZ2Uoa2V5KSB7CiAgICAgIHRoaXMuYWN0aXZlUGFnZSA9IGtleTsKICAgICAgdmFyIHBhZ2UgPSB0aGlzLnBhZ2VMaXN0LmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5wYXRoID09PSBrZXk7CiAgICAgIH0pOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaChwYWdlLmZ1bGxQYXRoKTsKICAgIH0sCiAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShrZXksIG5leHQpIHsKICAgICAgaWYgKHRoaXMucGFnZUxpc3QubGVuZ3RoID09PSAxKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2Uud2FybmluZyh0aGlzLiR0KCd3YXJuJykpOwogICAgICB9IC8v5riF6Zmk57yT5a2YCgoKICAgICAgdmFyIGluZGV4ID0gdGhpcy5wYWdlTGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5wYXRoID09PSBrZXk7CiAgICAgIH0pOwogICAgICB0aGlzLmNsZWFyQ2FjaGVzID0gdGhpcy5wYWdlTGlzdC5zcGxpY2UoaW5kZXgsIDEpLm1hcChmdW5jdGlvbiAocGFnZSkgewogICAgICAgIHJldHVybiBwYWdlLmNhY2hlZEtleTsKICAgICAgfSk7CgogICAgICBpZiAobmV4dCkgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKG5leHQpOwogICAgICB9IGVsc2UgaWYgKGtleSA9PT0gdGhpcy5hY3RpdmVQYWdlKSB7CiAgICAgICAgaW5kZXggPSBpbmRleCA+PSB0aGlzLnBhZ2VMaXN0Lmxlbmd0aCA/IHRoaXMucGFnZUxpc3QubGVuZ3RoIC0gMSA6IGluZGV4OwogICAgICAgIHRoaXMuYWN0aXZlUGFnZSA9IHRoaXMucGFnZUxpc3RbaW5kZXhdLnBhdGg7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2godGhpcy5hY3RpdmVQYWdlKTsKICAgICAgfQogICAgfSwKICAgIHJlZnJlc2g6IGZ1bmN0aW9uIHJlZnJlc2goa2V5LCBwYWdlKSB7CiAgICAgIHBhZ2UgPSBwYWdlIHx8IHRoaXMucGFnZUxpc3QuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLnBhdGggPT09IGtleTsKICAgICAgfSk7CiAgICAgIHBhZ2UubG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMuY2xlYXJDYWNoZShwYWdlKTsKCiAgICAgIGlmIChrZXkgPT09IHRoaXMuYWN0aXZlUGFnZSkgewogICAgICAgIHRoaXMucmVsb2FkQ29udGVudChmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gcGFnZS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g5YW25a6e5Yi35paw5b6I5b+r77yM5Yqg6L+Z5Liq5bu26L+f57qv57K55Li65LqGIGxvYWRpbmcg54q25oCB5aSa5bGV56S65LiA5Lya5YS/77yM6K6p55So5oi35oSf55+l5Yi35paw6L+Z5LiA6L+H56iLCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gcGFnZS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSwgNTAwKTsKICAgICAgfQogICAgfSwKICAgIG9uQ29udGV4dG1lbnU6IGZ1bmN0aW9uIG9uQ29udGV4dG1lbnUocGFnZUtleSwgZSkgewogICAgICBpZiAocGFnZUtleSkgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBlLm1ldGEgPSBwYWdlS2V5OwogICAgICAgIHRoaXMubWVudVZpc2libGUgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgb25NZW51U2VsZWN0OiBmdW5jdGlvbiBvbk1lbnVTZWxlY3Qoa2V5LCB0YXJnZXQsIHBhZ2VLZXkpIHsKICAgICAgc3dpdGNoIChrZXkpIHsKICAgICAgICBjYXNlICcxJzoKICAgICAgICAgIHRoaXMuY2xvc2VMZWZ0KHBhZ2VLZXkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJzInOgogICAgICAgICAgdGhpcy5jbG9zZVJpZ2h0KHBhZ2VLZXkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJzMnOgogICAgICAgICAgdGhpcy5jbG9zZU90aGVycyhwYWdlS2V5KTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICc0JzoKICAgICAgICAgIHRoaXMucmVmcmVzaChwYWdlS2V5KTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0sCiAgICBjbG9zZU90aGVyczogZnVuY3Rpb24gY2xvc2VPdGhlcnMocGFnZUtleSkgewogICAgICAvLyDmuIXpmaTnvJPlrZgKICAgICAgdmFyIGNsZWFyUGFnZXMgPSB0aGlzLnBhZ2VMaXN0LmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLnBhdGggIT09IHBhZ2VLZXkgJiYgIWl0ZW0udW5jbG9zZTsKICAgICAgfSk7CiAgICAgIHRoaXMuY2xlYXJDYWNoZXMgPSBjbGVhclBhZ2VzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLmNhY2hlZEtleTsKICAgICAgfSk7CiAgICAgIHRoaXMucGFnZUxpc3QgPSB0aGlzLnBhZ2VMaXN0LmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiAhY2xlYXJQYWdlcy5pbmNsdWRlcyhpdGVtKTsKICAgICAgfSk7IC8vIOWIpOaWrei3s+i9rAoKICAgICAgaWYgKHRoaXMuYWN0aXZlUGFnZSAhPSBwYWdlS2V5KSB7CiAgICAgICAgdGhpcy5hY3RpdmVQYWdlID0gcGFnZUtleTsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh0aGlzLmFjdGl2ZVBhZ2UpOwogICAgICB9CiAgICB9LAogICAgY2xvc2VMZWZ0OiBmdW5jdGlvbiBjbG9zZUxlZnQocGFnZUtleSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBpbmRleCA9IHRoaXMucGFnZUxpc3QuZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0ucGF0aCA9PT0gcGFnZUtleTsKICAgICAgfSk7IC8vIOa4hemZpOe8k+WtmAoKICAgICAgdmFyIGNsZWFyUGFnZXMgPSB0aGlzLnBhZ2VMaXN0LmZpbHRlcihmdW5jdGlvbiAoaXRlbSwgaSkgewogICAgICAgIHJldHVybiBpIDwgaW5kZXggJiYgIWl0ZW0udW5jbG9zZTsKICAgICAgfSk7CiAgICAgIHRoaXMuY2xlYXJDYWNoZXMgPSBjbGVhclBhZ2VzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLmNhY2hlZEtleTsKICAgICAgfSk7CiAgICAgIHRoaXMucGFnZUxpc3QgPSB0aGlzLnBhZ2VMaXN0LmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiAhY2xlYXJQYWdlcy5pbmNsdWRlcyhpdGVtKTsKICAgICAgfSk7IC8vIOWIpOaWrei3s+i9rAoKICAgICAgaWYgKCF0aGlzLnBhZ2VMaXN0LmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5wYXRoID09PSBfdGhpczMuYWN0aXZlUGFnZTsKICAgICAgfSkpIHsKICAgICAgICB0aGlzLmFjdGl2ZVBhZ2UgPSBwYWdlS2V5OwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHRoaXMuYWN0aXZlUGFnZSk7CiAgICAgIH0KICAgIH0sCiAgICBjbG9zZVJpZ2h0OiBmdW5jdGlvbiBjbG9zZVJpZ2h0KHBhZ2VLZXkpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICAvLyDmuIXpmaTnvJPlrZgKICAgICAgdmFyIGluZGV4ID0gdGhpcy5wYWdlTGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5wYXRoID09PSBwYWdlS2V5OwogICAgICB9KTsKICAgICAgdmFyIGNsZWFyUGFnZXMgPSB0aGlzLnBhZ2VMaXN0LmZpbHRlcihmdW5jdGlvbiAoaXRlbSwgaSkgewogICAgICAgIHJldHVybiBpID4gaW5kZXggJiYgIWl0ZW0udW5jbG9zZTsKICAgICAgfSk7CiAgICAgIHRoaXMuY2xlYXJDYWNoZXMgPSBjbGVhclBhZ2VzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLmNhY2hlZEtleTsKICAgICAgfSk7CiAgICAgIHRoaXMucGFnZUxpc3QgPSB0aGlzLnBhZ2VMaXN0LmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiAhY2xlYXJQYWdlcy5pbmNsdWRlcyhpdGVtKTsKICAgICAgfSk7IC8vIOWIpOaWrei3s+i9rAoKICAgICAgaWYgKCF0aGlzLnBhZ2VMaXN0LmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5wYXRoID09PSBfdGhpczQuYWN0aXZlUGFnZTsKICAgICAgfSkpIHsKICAgICAgICB0aGlzLmFjdGl2ZVBhZ2UgPSBwYWdlS2V5OwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHRoaXMuYWN0aXZlUGFnZSk7CiAgICAgIH0KICAgIH0sCiAgICBjbGVhckNhY2hlOiBmdW5jdGlvbiBjbGVhckNhY2hlKHBhZ2UpIHsKICAgICAgcGFnZS5faW5pdF8gPSBmYWxzZTsKICAgICAgdGhpcy5jbGVhckNhY2hlcyA9IFtwYWdlLmNhY2hlZEtleV07CiAgICB9LAogICAgcmVsb2FkQ29udGVudDogZnVuY3Rpb24gcmVsb2FkQ29udGVudChvbkxvYWRlZCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHRoaXMucmVmcmVzaGluZyA9IHRydWU7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNS5yZWZyZXNoaW5nID0gZmFsc2U7CgogICAgICAgIF90aGlzNS4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXM1LnNldENhY2hlZEtleShfdGhpczUuJHJvdXRlKTsKCiAgICAgICAgICBpZiAodHlwZW9mIG9uTG9hZGVkID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIG9uTG9hZGVkLmFwcGx5KF90aGlzNSwgW10pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9LCAyMDApOwogICAgfSwKICAgIHBhZ2VOYW1lOiBmdW5jdGlvbiBwYWdlTmFtZShwYWdlKSB7CiAgICAgIHJldHVybiB0aGlzLiR0KGdldEkxOG5LZXkocGFnZS5rZXlQYXRoKSk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIOa3u+WKoOebkeWQrOWZqA0KICAgICAqLwogICAgYWRkTGlzdGVuZXI6IGZ1bmN0aW9uIGFkZExpc3RlbmVyKCkgewogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncGFnZTpjbG9zZScsIHRoaXMuY2xvc2VQYWdlTGlzdGVuZXIpOwogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncGFnZTpyZWZyZXNoJywgdGhpcy5yZWZyZXNoUGFnZUxpc3RlbmVyKTsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3VubG9hZCcsIHRoaXMudW5sb2FkTGlzdGVuZXIpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiDnp7vlh7rnm5HlkKzlmagNCiAgICAgKi8KICAgIHJlbW92ZUxpc3RlbmVyOiBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcigpIHsKICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BhZ2U6Y2xvc2UnLCB0aGlzLmNsb3NlUGFnZUxpc3RlbmVyKTsKICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BhZ2U6cmVmcmVzaCcsIHRoaXMucmVmcmVzaFBhZ2VMaXN0ZW5lcik7CiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd1bmxvYWQnLCB0aGlzLnVubG9hZExpc3RlbmVyKTsKICAgIH0sCgogICAgLyoqDQogICAgICog6aG1562+5YWz6Zet5LqL5Lu255uR5ZCsDQogICAgICogQHBhcmFtIGV2ZW50IOmhteetvuWFs+mXreS6i+S7tg0KICAgICAqLwogICAgY2xvc2VQYWdlTGlzdGVuZXI6IGZ1bmN0aW9uIGNsb3NlUGFnZUxpc3RlbmVyKGV2ZW50KSB7CiAgICAgIHZhciBfZXZlbnQkZGV0YWlsID0gZXZlbnQuZGV0YWlsLAogICAgICAgICAgY2xvc2VSb3V0ZSA9IF9ldmVudCRkZXRhaWwuY2xvc2VSb3V0ZSwKICAgICAgICAgIG5leHRSb3V0ZSA9IF9ldmVudCRkZXRhaWwubmV4dFJvdXRlOwogICAgICB2YXIgY2xvc2VQYXRoID0gdHlwZW9mIGNsb3NlUm91dGUgPT09ICdzdHJpbmcnID8gY2xvc2VSb3V0ZSA6IGNsb3NlUm91dGUucGF0aDsKICAgICAgdmFyIHBhdGggPSBjbG9zZVBhdGggJiYgY2xvc2VQYXRoLnNwbGl0KCc/JylbMF07CiAgICAgIHRoaXMucmVtb3ZlKHBhdGgsIG5leHRSb3V0ZSk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIOmhtemdouWIt+aWsOS6i+S7tuebkeWQrA0KICAgICAqIEBwYXJhbSBldmVudCDpobXnrb7lhbPpl63kuovku7YNCiAgICAgKi8KICAgIHJlZnJlc2hQYWdlTGlzdGVuZXI6IGZ1bmN0aW9uIHJlZnJlc2hQYWdlTGlzdGVuZXIoZXZlbnQpIHsKICAgICAgdmFyIHBhZ2VLZXkgPSBldmVudC5kZXRhaWwucGFnZUtleTsKICAgICAgdmFyIHBhdGggPSBwYWdlS2V5ICYmIHBhZ2VLZXkuc3BsaXQoJz8nKVswXTsKICAgICAgdGhpcy5yZWZyZXNoKHBhdGgpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiDpobXpnaIgdW5sb2FkIOS6i+S7tuebkeWQrOWZqO+8jOa3u+WKoOmhteetvuWIsCBzZXNzaW9uIOe8k+WtmO+8jOeUqOS6juWIt+aWsOaXtuS/neeVmemhteetvg0KICAgICAqLwogICAgdW5sb2FkTGlzdGVuZXI6IGZ1bmN0aW9uIHVubG9hZExpc3RlbmVyKCkgewogICAgICB2YXIgdGFicyA9IHRoaXMucGFnZUxpc3QubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaXRlbSksIHt9LCB7CiAgICAgICAgICBfaW5pdF86IGZhbHNlCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKHByb2Nlc3MuZW52LlZVRV9BUFBfVEJBU19LRVksIEpTT04uc3RyaW5naWZ5KHRhYnMpKTsKICAgIH0sCiAgICBjcmVhdGVQYWdlOiBmdW5jdGlvbiBjcmVhdGVQYWdlKHJvdXRlKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAga2V5UGF0aDogcm91dGUubWF0Y2hlZFtyb3V0ZS5tYXRjaGVkLmxlbmd0aCAtIDFdLnBhdGgsCiAgICAgICAgZnVsbFBhdGg6IHJvdXRlLmZ1bGxQYXRoLAogICAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAgIHBhdGg6IHJvdXRlLnBhdGgsCiAgICAgICAgdGl0bGU6IHJvdXRlLm1ldGEgJiYgcm91dGUubWV0YS5wYWdlICYmIHJvdXRlLm1ldGEucGFnZS50aXRsZSwKICAgICAgICB1bmNsb3NlOiByb3V0ZS5tZXRhICYmIHJvdXRlLm1ldGEucGFnZSAmJiByb3V0ZS5tZXRhLnBhZ2UuY2xvc2FibGUgPT09IGZhbHNlCiAgICAgIH07CiAgICB9LAoKICAgIC8qKg0KICAgICAqIOiuvue9rumhtemdoue8k+WtmOeahGtleQ0KICAgICAqIEBwYXJhbSByb3V0ZSDpobXpnaLlr7nlupTnmoTot6/nlLENCiAgICAgKi8KICAgIHNldENhY2hlZEtleTogZnVuY3Rpb24gc2V0Q2FjaGVkS2V5KHJvdXRlKSB7CiAgICAgIHZhciBwYWdlID0gdGhpcy5wYWdlTGlzdC5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0ucGF0aCA9PT0gcm91dGUucGF0aDsKICAgICAgfSk7CiAgICAgIHBhZ2UudW5jbG9zZSA9IHJvdXRlLm1ldGEgJiYgcm91dGUubWV0YS5wYWdlICYmIHJvdXRlLm1ldGEucGFnZS5jbG9zYWJsZSA9PT0gZmFsc2U7CgogICAgICBpZiAoIXBhZ2UuX2luaXRfKSB7CiAgICAgICAgdmFyIHZub2RlID0gdGhpcy4kcmVmcy50YWJDb250ZW50LiR2bm9kZTsKICAgICAgICBwYWdlLmNhY2hlZEtleSA9IHZub2RlLmtleSArIHZub2RlLmNvbXBvbmVudE9wdGlvbnMuQ3Rvci5jaWQ7CiAgICAgICAgcGFnZS5faW5pdF8gPSB0cnVlOwogICAgICB9CiAgICB9LAoKICAgIC8qKg0KICAgICAqIOWKoOi9vee8k+WtmOeahCB0YWJzDQogICAgICovCiAgICBsb2FkQ2FjaGVkVGFiczogZnVuY3Rpb24gbG9hZENhY2hlZFRhYnMoKSB7CiAgICAgIHZhciBjYWNoZWRUYWJzU3RyID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShwcm9jZXNzLmVudi5WVUVfQVBQX1RCQVNfS0VZKTsKCiAgICAgIGlmIChjYWNoZWRUYWJzU3RyKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhciBjYWNoZWRUYWJzID0gSlNPTi5wYXJzZShjYWNoZWRUYWJzU3RyKTsKCiAgICAgICAgICBpZiAoY2FjaGVkVGFicy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHRoaXMucGFnZUxpc3QgPSBjYWNoZWRUYWJzOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGNvbnNvbGUud2FybignZmFpbGVkIHRvIGxvYWQgY2FjaGVkIHRhYnMsIGdvdCBleGNlcHRpb246JywgZSk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0ocHJvY2Vzcy5lbnYuVlVFX0FQUF9UQkFTX0tFWSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgbG9hZENhY2hlQ29uZmlnOiBmdW5jdGlvbiBsb2FkQ2FjaGVDb25maWcocm91dGVzKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgdmFyIHBDYWNoZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogdHJ1ZTsKICAgICAgcm91dGVzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICB2YXIgX3JlZiwgX2l0ZW0kbWV0YSRwYWdlJGNhY2hlLCBfaXRlbSRtZXRhLCBfaXRlbSRtZXRhJHBhZ2U7CgogICAgICAgIHZhciBjYWNoZUFibGUgPSAoX3JlZiA9IChfaXRlbSRtZXRhJHBhZ2UkY2FjaGUgPSAoX2l0ZW0kbWV0YSA9IGl0ZW0ubWV0YSkgPT09IG51bGwgfHwgX2l0ZW0kbWV0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9pdGVtJG1ldGEkcGFnZSA9IF9pdGVtJG1ldGEucGFnZSkgPT09IG51bGwgfHwgX2l0ZW0kbWV0YSRwYWdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRtZXRhJHBhZ2UuY2FjaGVBYmxlKSAhPT0gbnVsbCAmJiBfaXRlbSRtZXRhJHBhZ2UkY2FjaGUgIT09IHZvaWQgMCA/IF9pdGVtJG1ldGEkcGFnZSRjYWNoZSA6IHBDYWNoZSkgIT09IG51bGwgJiYgX3JlZiAhPT0gdm9pZCAwID8gX3JlZiA6IHRydWU7CgogICAgICAgIGlmICghY2FjaGVBYmxlKSB7CiAgICAgICAgICBfdGhpczYuZXhjbHVkZUtleXMucHVzaChuZXcgUmVnRXhwKCIiLmNvbmNhdChpdGVtLnBhdGgsICJcXGQrJCIpKSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoaXRlbS5jaGlsZHJlbikgewogICAgICAgICAgX3RoaXM2LmxvYWRDYWNoZUNvbmZpZyhpdGVtLmNoaWxkcmVuLCBjYWNoZUFibGUpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgbWFwTXV0YXRpb25zKCdzZXR0aW5nJywgWydjb3JyZWN0UGFnZU1pbkhlaWdodCddKSkKfTs="},{"version":3,"mappings":"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;AACA;AACA;AACAE,qBA1HA,6BA0HAC,KA1HA,EA0HA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA,KA/HA;;AAgIA;AACA;AACA;AACA;AACAC,uBApIA,+BAoIAD,KApIA,EAoIA;AACA;AACA;AACA;AACA,KAxIA;;AAyIA;AACA;AACA;AACAE,kBA5IA,4BA4IA;AACA;AAAA;AAAAC;AAAA;AAAA;AACAC;AACA,KA/IA;AAgJAC,cAhJA,sBAgJAC,KAhJA,EAgJA;AACA;AACAC,6DADA;AAEAC,gCAFA;AAEAC,sBAFA;AAGAC,wBAHA;AAIAC,qEAJA;AAKAC;AALA;AAOA,KAxJA;;AAyJA;AACA;AACA;AACA;AACAC,gBA7JA,wBA6JAP,KA7JA,EA6JA;AACA;AAAA;AAAA;AACAhC;;AACA;AACA;AACAA;AACAA;AACA;AACA,KArKA;;AAsKA;AACA;AACA;AACAwC,kBAzKA,4BAyKA;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA;AACA,SALA,CAKA;AACAC;AACA,SAPA,SAOA;AACAX;AACA;AACA;AACA,KAvLA;AAwLAY,mBAxLA,2BAwLAC,MAxLA,EAwLA;AAAA;;AAAA;AACAA;AAAA;;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA;AACA,OARA;AASA;AAlMA,KAmMAC,iDAnMA;AAnFA","names":["name","i18n","components","TabsHead","PageToggleTransition","Contextmenu","AdminLayout","AKeepAlive","data","clearCaches","pageList","activePage","menuVisible","refreshing","excludeKeys","computed","mapState","menuItemList","key","icon","text","tabsOffset","created","mounted","beforeDestroy","watch","page","newVal","oldVal","methods","changePage","remove","next","index","refresh","setTimeout","onContextmenu","pageKey","e","onMenuSelect","target","closeOthers","closeLeft","closeRight","clearCache","reloadContent","onLoaded","pageName","addListener","window","removeListener","closePageListener","event","refreshPageListener","unloadListener","_init_","sessionStorage","createPage","route","keyPath","fullPath","loading","path","title","unclose","setCachedKey","loadCachedTabs","console","loadCacheConfig","routes","mapMutations"],"sourceRoot":"src/layouts/tabs","sources":["TabsView.vue"],"sourcesContent":["<template>\r\n  <admin-layout>\r\n    <contextmenu :itemList=\"menuItemList\" :visible.sync=\"menuVisible\" @select=\"onMenuSelect\" />\r\n    <tabs-head\r\n        v-if=\"multiPage\"\r\n        :active=\"activePage\"\r\n        :page-list=\"pageList\"\r\n        @change=\"changePage\"\r\n        @close=\"remove\"\r\n        @refresh=\"refresh\"\r\n        @contextmenu=\"onContextmenu\"\r\n    />\r\n    <div :class=\"['tabs-view-content', layout, pageWidth]\" :style=\"`margin-top: ${multiPage ? -24 : 0}px`\">\r\n      <page-toggle-transition :disabled=\"animate.disabled\" :animate=\"animate.name\" :direction=\"animate.direction\">\r\n        <a-keep-alive :exclude-keys=\"excludeKeys\" v-if=\"multiPage && cachePage\" v-model=\"clearCaches\">\r\n          <router-view v-if=\"!refreshing\" ref=\"tabContent\" :key=\"$route.path\" />\r\n        </a-keep-alive>\r\n        <router-view ref=\"tabContent\" v-else-if=\"!refreshing\" />\r\n      </page-toggle-transition>\r\n    </div>\r\n  </admin-layout>\r\n</template>\r\n\r\n<script>\r\nimport AdminLayout from '@/layouts/AdminLayout'\r\nimport Contextmenu from '@/components/menu/Contextmenu'\r\nimport PageToggleTransition from '@/components/transition/PageToggleTransition'\r\nimport {mapState, mapMutations} from 'vuex'\r\nimport {getI18nKey} from '@/utils/routerUtil'\r\nimport AKeepAlive from '@/components/cache/AKeepAlive'\r\nimport TabsHead from '@/layouts/tabs/TabsHead'\r\n\r\nexport default {\r\n  name: 'TabsView',\r\n  i18n: require('./i18n'),\r\n  components: {TabsHead, PageToggleTransition, Contextmenu, AdminLayout , AKeepAlive },\r\n  data () {\r\n    return {\r\n      clearCaches: [],\r\n      pageList: [],\r\n      activePage: '',\r\n      menuVisible: false,\r\n      refreshing: false,\r\n      excludeKeys: []\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('setting', ['multiPage', 'cachePage', 'animate', 'layout', 'pageWidth']),\r\n    menuItemList() {\r\n      return [\r\n        { key: '1', icon: 'vertical-right', text: this.$t('closeLeft') },\r\n        { key: '2', icon: 'vertical-left', text: this.$t('closeRight') },\r\n        { key: '3', icon: 'close', text: this.$t('closeOthers') },\r\n        { key: '4', icon: 'sync', text: this.$t('refresh') },\r\n      ]\r\n    },\r\n    tabsOffset() {\r\n      return this.multiPage ? 24 : 0\r\n    }\r\n  },\r\n  created () {\r\n    this.loadCacheConfig(this.$router?.options?.routes)\r\n    this.loadCachedTabs()\r\n    const route = this.$route\r\n    if (this.pageList.findIndex(item => item.path === route.path) === -1) {\r\n      this.pageList.push(this.createPage(route))\r\n    }\r\n    this.activePage = route.path\r\n    if (this.multiPage) {\r\n      this.$nextTick(() => {\r\n        this.setCachedKey(route)\r\n      })\r\n      this.addListener()\r\n    }\r\n  },\r\n  mounted () {\r\n    this.correctPageMinHeight(-this.tabsOffset)\r\n  },\r\n  beforeDestroy() {\r\n    this.removeListener()\r\n    this.correctPageMinHeight(this.tabsOffset)\r\n  },\r\n  watch: {\r\n    '$router.options.routes': function (val) {\r\n      this.excludeKeys = []\r\n      this.loadCacheConfig(val)\r\n    },\r\n    '$route': function (newRoute) {\r\n      this.activePage = newRoute.path\r\n      const page = this.pageList.find(item => item.path === newRoute.path)\r\n      if (!this.multiPage) {\r\n        this.pageList = [this.createPage(newRoute)]\r\n      } else if (page) {\r\n        page.fullPath = newRoute.fullPath\r\n      } else if (!page) {\r\n        this.pageList.push(this.createPage(newRoute))\r\n      }\r\n      if (this.multiPage) {\r\n        this.$nextTick(() => {\r\n          this.setCachedKey(newRoute)\r\n        })\r\n      }\r\n    },\r\n    'multiPage': function (newVal) {\r\n      if (!newVal) {\r\n        this.pageList = [this.createPage(this.$route)]\r\n        this.removeListener()\r\n      } else {\r\n        this.addListener()\r\n      }\r\n    },\r\n    tabsOffset(newVal, oldVal) {\r\n      this.correctPageMinHeight(oldVal - newVal)\r\n    }\r\n  },\r\n  methods: {\r\n    changePage (key) {\r\n      this.activePage = key\r\n      const page = this.pageList.find(item => item.path === key)\r\n      this.$router.push(page.fullPath)\r\n    },\r\n    remove (key, next) {\r\n      if (this.pageList.length === 1) {\r\n        return this.$message.warning(this.$t('warn'))\r\n      }\r\n      //清除缓存\r\n      let index = this.pageList.findIndex(item => item.path === key)\r\n      this.clearCaches = this.pageList.splice(index, 1).map(page => page.cachedKey)\r\n      if (next) {\r\n        this.$router.push(next)\r\n      } else if (key === this.activePage) {\r\n        index = index >= this.pageList.length ? this.pageList.length - 1 : index\r\n        this.activePage = this.pageList[index].path\r\n        this.$router.push(this.activePage)\r\n      }\r\n    },\r\n    refresh (key, page) {\r\n      page = page || this.pageList.find(item => item.path === key)\r\n      page.loading = true\r\n      this.clearCache(page)\r\n      if (key === this.activePage) {\r\n        this.reloadContent(() => page.loading = false)\r\n      } else {\r\n        // 其实刷新很快，加这个延迟纯粹为了 loading 状态多展示一会儿，让用户感知刷新这一过程\r\n        setTimeout(() => page.loading = false, 500)\r\n      }\r\n    },\r\n    onContextmenu(pageKey, e) {\r\n      if (pageKey) {\r\n        e.preventDefault()\r\n        e.meta = pageKey\r\n        this.menuVisible = true\r\n      }\r\n    },\r\n    onMenuSelect (key, target, pageKey) {\r\n      switch (key) {\r\n        case '1': this.closeLeft(pageKey); break\r\n        case '2': this.closeRight(pageKey); break\r\n        case '3': this.closeOthers(pageKey); break\r\n        case '4': this.refresh(pageKey); break\r\n        default: break\r\n      }\r\n    },\r\n    closeOthers (pageKey) {\r\n      // 清除缓存\r\n      const clearPages = this.pageList.filter(item => item.path !== pageKey && !item.unclose)\r\n      this.clearCaches = clearPages.map(item => item.cachedKey)\r\n      this.pageList = this.pageList.filter(item => !clearPages.includes(item))\r\n      // 判断跳转\r\n      if (this.activePage != pageKey) {\r\n        this.activePage = pageKey\r\n        this.$router.push(this.activePage)\r\n      }\r\n    },\r\n    closeLeft (pageKey) {\r\n      const index = this.pageList.findIndex(item => item.path === pageKey)\r\n      // 清除缓存\r\n      const clearPages = this.pageList.filter((item, i) => i < index && !item.unclose)\r\n      this.clearCaches = clearPages.map(item => item.cachedKey)\r\n      this.pageList = this.pageList.filter(item => !clearPages.includes(item))\r\n      // 判断跳转\r\n      if (!this.pageList.find(item => item.path === this.activePage)) {\r\n        this.activePage = pageKey\r\n        this.$router.push(this.activePage)\r\n      }\r\n    },\r\n    closeRight (pageKey) {\r\n      // 清除缓存\r\n      const index = this.pageList.findIndex(item => item.path === pageKey)\r\n      const clearPages = this.pageList.filter((item, i) => i > index && !item.unclose)\r\n      this.clearCaches = clearPages.map(item => item.cachedKey)\r\n      this.pageList = this.pageList.filter(item => !clearPages.includes(item))\r\n      // 判断跳转\r\n      if (!this.pageList.find(item => item.path === this.activePage)) {\r\n        this.activePage = pageKey\r\n        this.$router.push(this.activePage)\r\n      }\r\n    },\r\n    clearCache(page) {\r\n      page._init_ = false\r\n      this.clearCaches = [page.cachedKey]\r\n    },\r\n    reloadContent(onLoaded) {\r\n      this.refreshing = true\r\n      setTimeout(() => {\r\n        this.refreshing = false\r\n        this.$nextTick(() => {\r\n          this.setCachedKey(this.$route)\r\n          if (typeof onLoaded === 'function') {\r\n            onLoaded.apply(this, [])\r\n          }\r\n        })\r\n      }, 200)\r\n    },\r\n    pageName(page) {\r\n      return this.$t(getI18nKey(page.keyPath))\r\n    },\r\n    /**\r\n     * 添加监听器\r\n     */\r\n    addListener() {\r\n      window.addEventListener('page:close', this.closePageListener)\r\n      window.addEventListener('page:refresh', this.refreshPageListener)\r\n      window.addEventListener('unload', this.unloadListener)\r\n    },\r\n    /**\r\n     * 移出监听器\r\n     */\r\n    removeListener() {\r\n      window.removeEventListener('page:close', this.closePageListener)\r\n      window.removeEventListener('page:refresh', this.refreshPageListener)\r\n      window.removeEventListener('unload', this.unloadListener)\r\n    },\r\n    /**\r\n     * 页签关闭事件监听\r\n     * @param event 页签关闭事件\r\n     */\r\n    closePageListener(event) {\r\n      const {closeRoute, nextRoute} = event.detail\r\n      const closePath = typeof closeRoute === 'string' ? closeRoute : closeRoute.path\r\n      const path = closePath && closePath.split('?')[0]\r\n      this.remove(path, nextRoute)\r\n    },\r\n    /**\r\n     * 页面刷新事件监听\r\n     * @param event 页签关闭事件\r\n     */\r\n    refreshPageListener(event) {\r\n      const {pageKey} = event.detail\r\n      const path = pageKey && pageKey.split('?')[0]\r\n      this.refresh(path)\r\n    },\r\n    /**\r\n     * 页面 unload 事件监听器，添加页签到 session 缓存，用于刷新时保留页签\r\n     */\r\n    unloadListener() {\r\n      const tabs = this.pageList.map(item => ({...item, _init_: false}))\r\n      sessionStorage.setItem(process.env.VUE_APP_TBAS_KEY, JSON.stringify(tabs))\r\n    },\r\n    createPage(route) {\r\n      return {\r\n        keyPath: route.matched[route.matched.length - 1].path,\r\n        fullPath: route.fullPath, loading: false,\r\n        path: route.path,\r\n        title: route.meta && route.meta.page && route.meta.page.title,\r\n        unclose: route.meta && route.meta.page && (route.meta.page.closable === false),\r\n      }\r\n    },\r\n    /**\r\n     * 设置页面缓存的key\r\n     * @param route 页面对应的路由\r\n     */\r\n    setCachedKey(route) {\r\n      const page = this.pageList.find(item => item.path === route.path)\r\n      page.unclose = route.meta && route.meta.page && (route.meta.page.closable === false)\r\n      if (!page._init_) {\r\n        const vnode = this.$refs.tabContent.$vnode\r\n        page.cachedKey = vnode.key + vnode.componentOptions.Ctor.cid\r\n        page._init_ = true\r\n      }\r\n    },\r\n    /**\r\n     * 加载缓存的 tabs\r\n     */\r\n    loadCachedTabs() {\r\n      const cachedTabsStr = sessionStorage.getItem(process.env.VUE_APP_TBAS_KEY)\r\n      if (cachedTabsStr) {\r\n        try {\r\n          const cachedTabs = JSON.parse(cachedTabsStr)\r\n          if (cachedTabs.length > 0) {\r\n            this.pageList = cachedTabs\r\n          }\r\n        } catch (e) {\r\n          console.warn('failed to load cached tabs, got exception:', e)\r\n        } finally {\r\n          sessionStorage.removeItem(process.env.VUE_APP_TBAS_KEY)\r\n        }\r\n      }\r\n    },\r\n    loadCacheConfig(routes, pCache = true) {\r\n      routes.forEach(item => {\r\n        const cacheAble = item.meta?.page?.cacheAble ?? pCache ?? true\r\n        if (!cacheAble) {\r\n          this.excludeKeys.push(new RegExp(`${item.path}\\\\d+$`))\r\n        }\r\n        if (item.children) {\r\n          this.loadCacheConfig(item.children, cacheAble)\r\n        }\r\n      })\r\n    },\r\n    ...mapMutations('setting', ['correctPageMinHeight'])\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n  .tabs-view{\r\n    margin: -16px auto 8px;\r\n    &.head.fixed{\r\n      max-width: 1400px;\r\n    }\r\n  }\r\n  .tabs-view-content{\r\n    position: relative;\r\n    &.head.fixed{\r\n      width: 1400px;\r\n      margin: 0 auto;\r\n    }\r\n  }\r\n</style>\r\n"]}]}