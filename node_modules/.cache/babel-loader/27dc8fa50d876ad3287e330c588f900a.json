{"remainingRequest":"D:\\ServerPlatformWeb\\node_modules\\babel-loader\\lib\\index.js!D:\\ServerPlatformWeb\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\ServerPlatformWeb\\src\\utils\\routerUtil.js","dependencies":[{"path":"D:\\ServerPlatformWeb\\src\\utils\\routerUtil.js","mtime":1649217944444},{"path":"D:\\ServerPlatformWeb\\babel.config.js","mtime":1649217944413},{"path":"D:\\ServerPlatformWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ServerPlatformWeb\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\ServerPlatformWeb\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJEOi9TZXJ2ZXJQbGF0Zm9ybVdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkuanMiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJEOi9TZXJ2ZXJQbGF0Zm9ybVdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCBfdHlwZW9mIGZyb20gIkQ6L1NlcnZlclBsYXRmb3JtV2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5saW5rLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC52YWx1ZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgcm91dGVyTWFwIGZyb20gJ0Avcm91dGVyL2FzeW5jL3JvdXRlci5tYXAnOwppbXBvcnQgeyBtZXJnZUkxOG5Gcm9tUm91dGVzIH0gZnJvbSAnQC91dGlscy9pMThuJzsKaW1wb3J0IFJvdXRlciBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IGRlZXBNZXJnZSBmcm9tICdkZWVwbWVyZ2UnOwppbXBvcnQgYmFzaWNPcHRpb25zIGZyb20gJ0Avcm91dGVyL2FzeW5jL2NvbmZpZy5hc3luYyc7IC8v5bqU55So6YWN572uCgp2YXIgYXBwT3B0aW9ucyA9IHsKICByb3V0ZXI6IHVuZGVmaW5lZCwKICBpMThuOiB1bmRlZmluZWQsCiAgc3RvcmU6IHVuZGVmaW5lZAp9OwovKioNCiAqIOiuvue9ruW6lOeUqOmFjee9rg0KICogQHBhcmFtIG9wdGlvbnMNCiAqLwoKZnVuY3Rpb24gc2V0QXBwT3B0aW9ucyhvcHRpb25zKSB7CiAgdmFyIHJvdXRlciA9IG9wdGlvbnMucm91dGVyLAogICAgICBzdG9yZSA9IG9wdGlvbnMuc3RvcmUsCiAgICAgIGkxOG4gPSBvcHRpb25zLmkxOG47CiAgYXBwT3B0aW9ucy5yb3V0ZXIgPSByb3V0ZXI7CiAgYXBwT3B0aW9ucy5zdG9yZSA9IHN0b3JlOwogIGFwcE9wdGlvbnMuaTE4biA9IGkxOG47Cn0KLyoqDQogKiDmoLnmja4g6Lev55Sx6YWN572uIOWSjCDot6/nlLHnu4Tku7bms6jlhowg6Kej5p6Q6Lev55SxDQogKiBAcGFyYW0gcm91dGVzQ29uZmlnIOi3r+eUsemFjee9rg0KICogQHBhcmFtIHJvdXRlck1hcCDmnKzlnLDot6/nlLHnu4Tku7bms6jlhozphY3nva4NCiAqLwoKCmZ1bmN0aW9uIHBhcnNlUm91dGVzKHJvdXRlc0NvbmZpZywgcm91dGVyTWFwKSB7CiAgdmFyIHJvdXRlcyA9IFtdOwogIHJvdXRlc0NvbmZpZy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAvLyDojrflj5bms6jlhozlnKggcm91dGVyTWFwIOS4reeahCByb3V0ZXLvvIzliJ3lp4vljJYgcm91dGVDZmcKICAgIHZhciByb3V0ZXIgPSB1bmRlZmluZWQsCiAgICAgICAgcm91dGVDZmcgPSB7fTsKCiAgICBpZiAodHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnKSB7CiAgICAgIHJvdXRlciA9IHJvdXRlck1hcFtpdGVtXTsKICAgICAgcm91dGVDZmcgPSB7CiAgICAgICAgcGF0aDogcm91dGVyICYmIHJvdXRlci5wYXRoIHx8IGl0ZW0sCiAgICAgICAgcm91dGVyOiBpdGVtCiAgICAgIH07CiAgICB9IGVsc2UgaWYgKF90eXBlb2YoaXRlbSkgPT09ICdvYmplY3QnKSB7CiAgICAgIHJvdXRlciA9IHJvdXRlck1hcFtpdGVtLnJvdXRlcl07CiAgICAgIHJvdXRlQ2ZnID0gaXRlbTsKICAgIH0KCiAgICBpZiAoIXJvdXRlcikgewogICAgICBjb25zb2xlLndhcm4oImNhbid0IGZpbmQgcmVnaXN0ZXIgZm9yIHJvdXRlciAiLmNvbmNhdChyb3V0ZUNmZy5yb3V0ZXIsICIsIHBsZWFzZSByZWdpc3RlciBpdCBpbiBhZHZhbmNlLiIpKTsKICAgICAgcm91dGVyID0gdHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnID8gewogICAgICAgIHBhdGg6IGl0ZW0sCiAgICAgICAgbmFtZTogaXRlbQogICAgICB9IDogaXRlbTsKICAgIH0gLy8g5LuOIHJvdXRlciDlkowgcm91dGVDZmcg6Kej5p6Q6Lev55SxCgoKICAgIHZhciBtZXRhID0gX29iamVjdFNwcmVhZCh7CiAgICAgIGF1dGhvcml0eTogcm91dGVyLmF1dGhvcml0eSwKICAgICAgaWNvbjogcm91dGVyLmljb24sCiAgICAgIHBhZ2U6IHJvdXRlci5wYWdlLAogICAgICBsaW5rOiByb3V0ZXIubGluaywKICAgICAgcGFyYW1zOiByb3V0ZXIucGFyYW1zLAogICAgICBxdWVyeTogcm91dGVyLnF1ZXJ5CiAgICB9LCByb3V0ZXIubWV0YSk7CgogICAgdmFyIGNmZ01ldGEgPSBfb2JqZWN0U3ByZWFkKHsKICAgICAgYXV0aG9yaXR5OiByb3V0ZUNmZy5hdXRob3JpdHksCiAgICAgIGljb246IHJvdXRlQ2ZnLmljb24sCiAgICAgIHBhZ2U6IHJvdXRlQ2ZnLnBhZ2UsCiAgICAgIGxpbms6IHJvdXRlQ2ZnLmxpbmssCiAgICAgIHBhcmFtczogcm91dGVDZmcucGFyYW1zLAogICAgICBxdWVyeTogcm91dGVDZmcucXVlcnkKICAgIH0sIHJvdXRlQ2ZnLm1ldGEpOwoKICAgIE9iamVjdC5rZXlzKGNmZ01ldGEpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICBpZiAoY2ZnTWV0YVtrZXldID09PSB1bmRlZmluZWQgfHwgY2ZnTWV0YVtrZXldID09PSBudWxsIHx8IGNmZ01ldGFba2V5XSA9PT0gJycpIHsKICAgICAgICBkZWxldGUgY2ZnTWV0YVtrZXldOwogICAgICB9CiAgICB9KTsKICAgIE9iamVjdC5hc3NpZ24obWV0YSwgY2ZnTWV0YSk7CiAgICB2YXIgcm91dGUgPSB7CiAgICAgIHBhdGg6IHJvdXRlQ2ZnLnBhdGggfHwgcm91dGVyLnBhdGggfHwgcm91dGVDZmcucm91dGVyLAogICAgICBuYW1lOiByb3V0ZUNmZy5uYW1lIHx8IHJvdXRlci5uYW1lLAogICAgICBjb21wb25lbnQ6IHJvdXRlci5jb21wb25lbnQsCiAgICAgIHJlZGlyZWN0OiByb3V0ZUNmZy5yZWRpcmVjdCB8fCByb3V0ZXIucmVkaXJlY3QsCiAgICAgIG1ldGE6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWV0YSksIHt9LCB7CiAgICAgICAgYXV0aG9yaXR5OiBtZXRhLmF1dGhvcml0eSB8fCAnKicKICAgICAgfSkKICAgIH07CgogICAgaWYgKHJvdXRlQ2ZnLmludmlzaWJsZSB8fCByb3V0ZXIuaW52aXNpYmxlKSB7CiAgICAgIHJvdXRlLm1ldGEuaW52aXNpYmxlID0gdHJ1ZTsKICAgIH0KCiAgICBpZiAocm91dGVDZmcuY2hpbGRyZW4gJiYgcm91dGVDZmcuY2hpbGRyZW4ubGVuZ3RoID4gMCkgewogICAgICByb3V0ZS5jaGlsZHJlbiA9IHBhcnNlUm91dGVzKHJvdXRlQ2ZnLmNoaWxkcmVuLCByb3V0ZXJNYXApOwogICAgfQoKICAgIHJvdXRlcy5wdXNoKHJvdXRlKTsKICB9KTsKICByZXR1cm4gcm91dGVzOwp9Ci8qKg0KICog5Yqg6L296Lev55SxDQogKiBAcGFyYW0gcm91dGVzQ29uZmlnIHtSb3V0ZUNvbmZpZ1tdfSDot6/nlLHphY3nva4NCiAqLwoKCmZ1bmN0aW9uIGxvYWRSb3V0ZXMocm91dGVzQ29uZmlnKSB7CiAgLy/lhbzlrrkgMC42LjEg5Lul5LiL54mI5pysCgogIC8qKioqKioqKioqKioqKiog5YW85a65IHZlcnNpb24gPCB2MC42LjEgKioqKioqKioqKioqKioqKiovCiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwKSB7CiAgICB2YXIgYXJnMCA9IGFyZ3VtZW50c1swXTsKCiAgICBpZiAoYXJnMC5yb3V0ZXIgfHwgYXJnMC5pMThuIHx8IGFyZzAuc3RvcmUpIHsKICAgICAgcm91dGVzQ29uZmlnID0gYXJndW1lbnRzWzFdOwogICAgICBjb25zb2xlLmVycm9yKCd0aGUgdXNhZ2Ugb2Ygc2lnbmF0dXJlIGxvYWRSb3V0ZXMoe3JvdXRlciwgc3RvcmUsIGkxOG59LCByb3V0ZXNDb25maWcpIGlzIG91dCBvZiBkYXRlLCBwbGVhc2UgdXNlIHRoZSBuZXcgc2lnbmF0dXJlOiBsb2FkUm91dGVzKHJvdXRlc0NvbmZpZykuJyk7CiAgICAgIGNvbnNvbGUuZXJyb3IoJ+aWueazleetvuWQjSBsb2FkUm91dGVzKHtyb3V0ZXIsIHN0b3JlLCBpMThufSwgcm91dGVzQ29uZmlnKSDnmoTnlKjms5Xlt7Lov4fml7YsIOivt+S9v+eUqOaWsOeahOaWueazleetvuWQjSBsb2FkUm91dGVzKHJvdXRlc0NvbmZpZynjgIInKTsKICAgIH0KICB9CiAgLyoqKioqKioqKioqKioqKiDlhbzlrrkgdmVyc2lvbiA8IHYwLjYuMSAqKioqKioqKioqKioqKioqKi8KICAvLyDlupTnlKjphY3nva4KCgogIHZhciByb3V0ZXIgPSBhcHBPcHRpb25zLnJvdXRlciwKICAgICAgc3RvcmUgPSBhcHBPcHRpb25zLnN0b3JlLAogICAgICBpMThuID0gYXBwT3B0aW9ucy5pMThuOyAvLyDlpoLmnpwgcm91dGVzQ29uZmlnIOacieWAvO+8jOWImeabtOaWsOWIsOacrOWcsO+8jOWQpuWImeS7juacrOWcsOiOt+WPlgoKICBpZiAocm91dGVzQ29uZmlnKSB7CiAgICBzdG9yZS5jb21taXQoJ2FjY291bnQvc2V0Um91dGVzQ29uZmlnJywgcm91dGVzQ29uZmlnKTsKICB9IGVsc2UgewogICAgcm91dGVzQ29uZmlnID0gc3RvcmUuZ2V0dGVyc1snYWNjb3VudC9yb3V0ZXNDb25maWcnXTsKICB9IC8vIOWmguaenOW8gOWQr+S6huW8guatpei3r+eUse+8jOWImeWKoOi9veW8guatpei3r+eUsemFjee9rgoKCiAgdmFyIGFzeW5jUm91dGVzID0gc3RvcmUuc3RhdGUuc2V0dGluZy5hc3luY1JvdXRlczsKCiAgaWYgKGFzeW5jUm91dGVzKSB7CiAgICBpZiAocm91dGVzQ29uZmlnICYmIHJvdXRlc0NvbmZpZy5sZW5ndGggPiAwKSB7CiAgICAgIHZhciByb3V0ZXMgPSBwYXJzZVJvdXRlcyhyb3V0ZXNDb25maWcsIHJvdXRlck1hcCk7CiAgICAgIHZhciBmaW5hbFJvdXRlcyA9IG1lcmdlUm91dGVzKGJhc2ljT3B0aW9ucy5yb3V0ZXMsIHJvdXRlcyk7CiAgICAgIGZvcm1hdFJvdXRlcyhmaW5hbFJvdXRlcyk7CiAgICAgIHJvdXRlci5vcHRpb25zID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCByb3V0ZXIub3B0aW9ucyksIHt9LCB7CiAgICAgICAgcm91dGVzOiBmaW5hbFJvdXRlcwogICAgICB9KTsKICAgICAgcm91dGVyLm1hdGNoZXIgPSBuZXcgUm91dGVyKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcm91dGVyLm9wdGlvbnMpLCB7fSwgewogICAgICAgIHJvdXRlczogW10KICAgICAgfSkpLm1hdGNoZXI7CiAgICAgIHJvdXRlci5hZGRSb3V0ZXMoZmluYWxSb3V0ZXMpOwogICAgfQogIH0gLy8g5o+Q5Y+W6Lev55Sx5Zu96ZmF5YyW5pWw5o2uCgoKICBtZXJnZUkxOG5Gcm9tUm91dGVzKGkxOG4sIHJvdXRlci5vcHRpb25zLnJvdXRlcyk7IC8vIOWIneWni+WMlkFkbWlu5ZCO5Y+w6I+c5Y2V5pWw5o2uCgogIHZhciByb290Um91dGUgPSByb3V0ZXIub3B0aW9ucy5yb3V0ZXMuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIGl0ZW0ucGF0aCA9PT0gJy8nOwogIH0pOwogIHZhciBtZW51Um91dGVzID0gcm9vdFJvdXRlICYmIHJvb3RSb3V0ZS5jaGlsZHJlbjsKCiAgaWYgKG1lbnVSb3V0ZXMpIHsKICAgIHN0b3JlLmNvbW1pdCgnc2V0dGluZy9zZXRNZW51RGF0YScsIG1lbnVSb3V0ZXMpOwogIH0KfQovKioNCiAqIOWQiOW5tui3r+eUsQ0KICogQHBhcmFtIHRhcmdldCB7Um91dGVbXX0NCiAqIEBwYXJhbSBzb3VyY2Uge1JvdXRlW119DQogKiBAcmV0dXJucyB7Um91dGVbXX0NCiAqLwoKCmZ1bmN0aW9uIG1lcmdlUm91dGVzKHRhcmdldCwgc291cmNlKSB7CiAgdmFyIHJvdXRlc01hcCA9IHt9OwogIHRhcmdldC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gcm91dGVzTWFwW2l0ZW0ucGF0aF0gPSBpdGVtOwogIH0pOwogIHNvdXJjZS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gcm91dGVzTWFwW2l0ZW0ucGF0aF0gPSBpdGVtOwogIH0pOwogIHJldHVybiBPYmplY3QudmFsdWVzKHJvdXRlc01hcCk7Cn0KLyoqDQogKiDmt7HluqblkIjlubbot6/nlLENCiAqIEBwYXJhbSB0YXJnZXQge1JvdXRlW119DQogKiBAcGFyYW0gc291cmNlIHtSb3V0ZVtdfQ0KICogQHJldHVybnMge1JvdXRlW119DQogKi8KCgpmdW5jdGlvbiBkZWVwTWVyZ2VSb3V0ZXModGFyZ2V0LCBzb3VyY2UpIHsKICAvLyDmmKDlsITot6/nlLHmlbDnu4QKICB2YXIgbWFwUm91dGVzID0gZnVuY3Rpb24gbWFwUm91dGVzKHJvdXRlcykgewogICAgdmFyIHJvdXRlc01hcCA9IHt9OwogICAgcm91dGVzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgcm91dGVzTWFwW2l0ZW0ucGF0aF0gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGl0ZW0pLCB7fSwgewogICAgICAgIGNoaWxkcmVuOiBpdGVtLmNoaWxkcmVuID8gbWFwUm91dGVzKGl0ZW0uY2hpbGRyZW4pIDogdW5kZWZpbmVkCiAgICAgIH0pOwogICAgfSk7CiAgICByZXR1cm4gcm91dGVzTWFwOwogIH07CgogIHZhciB0YXJNYXAgPSBtYXBSb3V0ZXModGFyZ2V0KTsKICB2YXIgc3JjTWFwID0gbWFwUm91dGVzKHNvdXJjZSk7IC8vIOWQiOW5tui3r+eUsQoKICB2YXIgbWVyZ2UgPSBkZWVwTWVyZ2UodGFyTWFwLCBzcmNNYXApOyAvLyDovazmjaLkuLogcm91dGVzIOaVsOe7hAoKICB2YXIgcGFyc2VSb3V0ZXNNYXAgPSBmdW5jdGlvbiBwYXJzZVJvdXRlc01hcChyb3V0ZXNNYXApIHsKICAgIHJldHVybiBPYmplY3QudmFsdWVzKHJvdXRlc01hcCkubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIGlmIChpdGVtLmNoaWxkcmVuKSB7CiAgICAgICAgaXRlbS5jaGlsZHJlbiA9IHBhcnNlUm91dGVzTWFwKGl0ZW0uY2hpbGRyZW4pOwogICAgICB9IGVsc2UgewogICAgICAgIGRlbGV0ZSBpdGVtLmNoaWxkcmVuOwogICAgICB9CgogICAgICByZXR1cm4gaXRlbTsKICAgIH0pOwogIH07CgogIHJldHVybiBwYXJzZVJvdXRlc01hcChtZXJnZSk7Cn0KLyoqDQogKiDmoLzlvI/ljJbot6/nlLENCiAqIEBwYXJhbSByb3V0ZXMg6Lev55Sx6YWN572uDQogKi8KCgpmdW5jdGlvbiBmb3JtYXRSb3V0ZXMocm91dGVzKSB7CiAgcm91dGVzLmZvckVhY2goZnVuY3Rpb24gKHJvdXRlKSB7CiAgICB2YXIgcGF0aCA9IHJvdXRlLnBhdGg7CgogICAgaWYgKCFwYXRoLnN0YXJ0c1dpdGgoJy8nKSAmJiBwYXRoICE9PSAnKicpIHsKICAgICAgcm91dGUucGF0aCA9ICcvJyArIHBhdGg7CiAgICB9CiAgfSk7CiAgZm9ybWF0QXV0aG9yaXR5KHJvdXRlcyk7Cn0KLyoqDQogKiDmoLzlvI/ljJbot6/nlLHnmoTmnYPpmZDphY3nva4NCiAqIEBwYXJhbSByb3V0ZXMg6Lev55SxDQogKiBAcGFyYW0gcEF1dGhvcml0aWVzIOeItue6p+i3r+eUseadg+mZkOmFjee9rumbhuWQiA0KICovCgoKZnVuY3Rpb24gZm9ybWF0QXV0aG9yaXR5KHJvdXRlcykgewogIHZhciBwQXV0aG9yaXRpZXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFtdOwogIHJvdXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChyb3V0ZSkgewogICAgdmFyIG1ldGEgPSByb3V0ZS5tZXRhOwogICAgdmFyIGRlZmF1bHRBdXRob3JpdHkgPSBwQXV0aG9yaXRpZXNbcEF1dGhvcml0aWVzLmxlbmd0aCAtIDFdIHx8IHsKICAgICAgcGVybWlzc2lvbjogJyonCiAgICB9OwoKICAgIGlmIChtZXRhKSB7CiAgICAgIHZhciBhdXRob3JpdHkgPSB7fTsKCiAgICAgIGlmICghbWV0YS5hdXRob3JpdHkpIHsKICAgICAgICBhdXRob3JpdHkgPSBkZWZhdWx0QXV0aG9yaXR5OwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBtZXRhLmF1dGhvcml0eSA9PT0gJ3N0cmluZycpIHsKICAgICAgICBhdXRob3JpdHkucGVybWlzc2lvbiA9IG1ldGEuYXV0aG9yaXR5OwogICAgICB9IGVsc2UgaWYgKF90eXBlb2YobWV0YS5hdXRob3JpdHkpID09PSAnb2JqZWN0JykgewogICAgICAgIGF1dGhvcml0eSA9IG1ldGEuYXV0aG9yaXR5OwogICAgICAgIHZhciBfYXV0aG9yaXR5ID0gYXV0aG9yaXR5LAogICAgICAgICAgICByb2xlID0gX2F1dGhvcml0eS5yb2xlOwoKICAgICAgICBpZiAodHlwZW9mIHJvbGUgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICBhdXRob3JpdHkucm9sZSA9IFtyb2xlXTsKICAgICAgICB9CgogICAgICAgIGlmICghYXV0aG9yaXR5LnBlcm1pc3Npb24gJiYgIWF1dGhvcml0eS5yb2xlKSB7CiAgICAgICAgICBhdXRob3JpdHkgPSBkZWZhdWx0QXV0aG9yaXR5OwogICAgICAgIH0KICAgICAgfQoKICAgICAgbWV0YS5hdXRob3JpdHkgPSBhdXRob3JpdHk7CiAgICB9IGVsc2UgewogICAgICB2YXIgX2F1dGhvcml0eTIgPSBkZWZhdWx0QXV0aG9yaXR5OwogICAgICByb3V0ZS5tZXRhID0gewogICAgICAgIGF1dGhvcml0eTogX2F1dGhvcml0eTIKICAgICAgfTsKICAgIH0KCiAgICByb3V0ZS5tZXRhLnBBdXRob3JpdGllcyA9IHBBdXRob3JpdGllczsKCiAgICBpZiAocm91dGUuY2hpbGRyZW4pIHsKICAgICAgZm9ybWF0QXV0aG9yaXR5KHJvdXRlLmNoaWxkcmVuLCBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHBBdXRob3JpdGllcyksIFtyb3V0ZS5tZXRhLmF1dGhvcml0eV0pKTsKICAgIH0KICB9KTsKfQovKioNCiAqIOS7jui3r+eUsSBwYXRoIOino+aekCBpMThuIGtleQ0KICogQHBhcmFtIHBhdGgNCiAqIEByZXR1cm5zIHsqfQ0KICovCgoKZnVuY3Rpb24gZ2V0STE4bktleShwYXRoKSB7CiAgdmFyIGtleXMgPSBwYXRoLnNwbGl0KCcvJykuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gIWl0ZW0uc3RhcnRzV2l0aCgnOicpICYmIGl0ZW0gIT0gJyc7CiAgfSk7CiAga2V5cy5wdXNoKCduYW1lJyk7CiAgcmV0dXJuIGtleXMuam9pbignLicpOwp9Ci8qKg0KICog5Yqg6L295a+86Iiq5a6I5Y2rDQogKiBAcGFyYW0gZ3VhcmRzDQogKiBAcGFyYW0gb3B0aW9ucw0KICovCgoKZnVuY3Rpb24gbG9hZEd1YXJkcyhndWFyZHMsIG9wdGlvbnMpIHsKICB2YXIgYmVmb3JlRWFjaCA9IGd1YXJkcy5iZWZvcmVFYWNoLAogICAgICBhZnRlckVhY2ggPSBndWFyZHMuYWZ0ZXJFYWNoOwogIHZhciByb3V0ZXIgPSBvcHRpb25zLnJvdXRlcjsKICBiZWZvcmVFYWNoLmZvckVhY2goZnVuY3Rpb24gKGd1YXJkKSB7CiAgICBpZiAoZ3VhcmQgJiYgdHlwZW9mIGd1YXJkID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIHJvdXRlci5iZWZvcmVFYWNoKGZ1bmN0aW9uICh0bywgZnJvbSwgbmV4dCkgewogICAgICAgIHJldHVybiBndWFyZCh0bywgZnJvbSwgbmV4dCwgb3B0aW9ucyk7CiAgICAgIH0pOwogICAgfQogIH0pOwogIGFmdGVyRWFjaC5mb3JFYWNoKGZ1bmN0aW9uIChndWFyZCkgewogICAgaWYgKGd1YXJkICYmIHR5cGVvZiBndWFyZCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICByb3V0ZXIuYWZ0ZXJFYWNoKGZ1bmN0aW9uICh0bywgZnJvbSkgewogICAgICAgIHJldHVybiBndWFyZCh0bywgZnJvbSwgb3B0aW9ucyk7CiAgICAgIH0pOwogICAgfQogIH0pOwp9CgpleHBvcnQgeyBwYXJzZVJvdXRlcywgbG9hZFJvdXRlcywgZm9ybWF0QXV0aG9yaXR5LCBnZXRJMThuS2V5LCBsb2FkR3VhcmRzLCBkZWVwTWVyZ2VSb3V0ZXMsIGZvcm1hdFJvdXRlcywgc2V0QXBwT3B0aW9ucyB9Ow=="},{"version":3,"sources":["D:/ServerPlatformWeb/src/utils/routerUtil.js"],"names":["routerMap","mergeI18nFromRoutes","Router","deepMerge","basicOptions","appOptions","router","undefined","i18n","store","setAppOptions","options","parseRoutes","routesConfig","routes","forEach","item","routeCfg","path","console","warn","name","meta","authority","icon","page","link","params","query","cfgMeta","Object","keys","key","assign","route","component","redirect","invisible","children","length","push","loadRoutes","arguments","arg0","error","commit","getters","asyncRoutes","state","setting","finalRoutes","mergeRoutes","formatRoutes","matcher","addRoutes","rootRoute","find","menuRoutes","target","source","routesMap","values","deepMergeRoutes","mapRoutes","tarMap","srcMap","merge","parseRoutesMap","map","startsWith","formatAuthority","pAuthorities","defaultAuthority","permission","role","getI18nKey","split","filter","join","loadGuards","guards","beforeEach","afterEach","guard","to","from","next"],"mappings":"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","sourcesContent":["import routerMap from '@/router/async/router.map'\r\nimport {mergeI18nFromRoutes} from '@/utils/i18n'\r\nimport Router from 'vue-router'\r\nimport deepMerge from 'deepmerge'\r\nimport basicOptions from '@/router/async/config.async'\r\n\r\n//应用配置\r\nlet appOptions = {\r\n  router: undefined,\r\n  i18n: undefined,\r\n  store: undefined\r\n}\r\n\r\n/**\r\n * 设置应用配置\r\n * @param options\r\n */\r\nfunction setAppOptions(options) {\r\n  const {router, store, i18n} = options\r\n  appOptions.router = router\r\n  appOptions.store = store\r\n  appOptions.i18n = i18n\r\n}\r\n\r\n/**\r\n * 根据 路由配置 和 路由组件注册 解析路由\r\n * @param routesConfig 路由配置\r\n * @param routerMap 本地路由组件注册配置\r\n */\r\nfunction parseRoutes(routesConfig, routerMap) {\r\n  let routes = []\r\n  routesConfig.forEach(item => {\r\n    // 获取注册在 routerMap 中的 router，初始化 routeCfg\r\n    let router = undefined, routeCfg = {}\r\n    if (typeof item === 'string') {\r\n      router = routerMap[item]\r\n      routeCfg = {path: (router && router.path) || item, router: item}\r\n    } else if (typeof item === 'object') {\r\n      router = routerMap[item.router]\r\n      routeCfg = item\r\n    }\r\n    if (!router) {\r\n      console.warn(`can't find register for router ${routeCfg.router}, please register it in advance.`)\r\n      router = typeof item === 'string' ? {path: item, name: item} : item\r\n    }\r\n    // 从 router 和 routeCfg 解析路由\r\n    const meta = {\r\n      authority: router.authority,\r\n      icon: router.icon,\r\n      page: router.page,\r\n      link: router.link,\r\n      params: router.params,\r\n      query: router.query,\r\n      ...router.meta\r\n    }\r\n    const cfgMeta = {\r\n      authority: routeCfg.authority,\r\n      icon: routeCfg.icon,\r\n      page: routeCfg.page,\r\n      link: routeCfg.link,\r\n      params: routeCfg.params,\r\n      query: routeCfg.query,\r\n      ...routeCfg.meta\r\n    }\r\n    Object.keys(cfgMeta).forEach(key => {\r\n      if (cfgMeta[key] === undefined || cfgMeta[key] === null || cfgMeta[key] === '') {\r\n        delete cfgMeta[key]\r\n      }\r\n    })\r\n    Object.assign(meta, cfgMeta)\r\n    const route = {\r\n      path: routeCfg.path || router.path || routeCfg.router,\r\n      name: routeCfg.name || router.name,\r\n      component: router.component,\r\n      redirect: routeCfg.redirect || router.redirect,\r\n      meta: {...meta, authority: meta.authority || '*'}\r\n    }\r\n    if (routeCfg.invisible || router.invisible) {\r\n      route.meta.invisible = true\r\n    }\r\n    if (routeCfg.children && routeCfg.children.length > 0) {\r\n      route.children = parseRoutes(routeCfg.children, routerMap)\r\n    }\r\n    routes.push(route)\r\n  })\r\n  return routes\r\n}\r\n\r\n/**\r\n * 加载路由\r\n * @param routesConfig {RouteConfig[]} 路由配置\r\n */\r\nfunction loadRoutes(routesConfig) {\r\n  //兼容 0.6.1 以下版本\r\n  /*************** 兼容 version < v0.6.1 *****************/\r\n  if (arguments.length > 0) {\r\n    const arg0 = arguments[0]\r\n    if (arg0.router || arg0.i18n || arg0.store) {\r\n      routesConfig = arguments[1]\r\n      console.error('the usage of signature loadRoutes({router, store, i18n}, routesConfig) is out of date, please use the new signature: loadRoutes(routesConfig).')\r\n      console.error('方法签名 loadRoutes({router, store, i18n}, routesConfig) 的用法已过时, 请使用新的方法签名 loadRoutes(routesConfig)。')\r\n    }\r\n  }\r\n  /*************** 兼容 version < v0.6.1 *****************/\r\n\r\n  // 应用配置\r\n  const {router, store, i18n} = appOptions\r\n\r\n  // 如果 routesConfig 有值，则更新到本地，否则从本地获取\r\n  if (routesConfig) {\r\n    store.commit('account/setRoutesConfig', routesConfig)\r\n  } else {\r\n    routesConfig = store.getters['account/routesConfig']\r\n  }\r\n  // 如果开启了异步路由，则加载异步路由配置\r\n  const asyncRoutes = store.state.setting.asyncRoutes\r\n  if (asyncRoutes) {\r\n    if (routesConfig && routesConfig.length > 0) {\r\n      const routes = parseRoutes(routesConfig, routerMap)\r\n      const finalRoutes = mergeRoutes(basicOptions.routes, routes)\r\n      formatRoutes(finalRoutes)\r\n      router.options = {...router.options, routes: finalRoutes}\r\n      router.matcher = new Router({...router.options, routes:[]}).matcher\r\n      router.addRoutes(finalRoutes)\r\n    }\r\n  }\r\n  // 提取路由国际化数据\r\n  mergeI18nFromRoutes(i18n, router.options.routes)\r\n  // 初始化Admin后台菜单数据\r\n  const rootRoute = router.options.routes.find(item => item.path === '/')\r\n  const menuRoutes = rootRoute && rootRoute.children\r\n  if (menuRoutes) {\r\n    store.commit('setting/setMenuData', menuRoutes)\r\n  }\r\n}\r\n\r\n/**\r\n * 合并路由\r\n * @param target {Route[]}\r\n * @param source {Route[]}\r\n * @returns {Route[]}\r\n */\r\nfunction mergeRoutes(target, source) {\r\n  const routesMap = {}\r\n  target.forEach(item => routesMap[item.path] = item)\r\n  source.forEach(item => routesMap[item.path] = item)\r\n  return Object.values(routesMap)\r\n}\r\n\r\n/**\r\n * 深度合并路由\r\n * @param target {Route[]}\r\n * @param source {Route[]}\r\n * @returns {Route[]}\r\n */\r\nfunction deepMergeRoutes(target, source) {\r\n  // 映射路由数组\r\n  const mapRoutes = routes => {\r\n    const routesMap = {}\r\n    routes.forEach(item => {\r\n      routesMap[item.path] = {\r\n        ...item,\r\n        children: item.children ? mapRoutes(item.children) : undefined\r\n      }\r\n    })\r\n    return routesMap\r\n  }\r\n  const tarMap = mapRoutes(target)\r\n  const srcMap = mapRoutes(source)\r\n\r\n  // 合并路由\r\n  const merge = deepMerge(tarMap, srcMap)\r\n\r\n  // 转换为 routes 数组\r\n  const parseRoutesMap = routesMap => {\r\n    return Object.values(routesMap).map(item => {\r\n      if (item.children) {\r\n        item.children = parseRoutesMap(item.children)\r\n      } else {\r\n        delete item.children\r\n      }\r\n      return item\r\n    })\r\n  }\r\n  return parseRoutesMap(merge)\r\n}\r\n\r\n/**\r\n * 格式化路由\r\n * @param routes 路由配置\r\n */\r\nfunction formatRoutes(routes) {\r\n  routes.forEach(route => {\r\n    const {path} = route\r\n    if (!path.startsWith('/') && path !== '*') {\r\n      route.path = '/' + path\r\n    }\r\n  })\r\n  formatAuthority(routes)\r\n}\r\n\r\n/**\r\n * 格式化路由的权限配置\r\n * @param routes 路由\r\n * @param pAuthorities 父级路由权限配置集合\r\n */\r\nfunction formatAuthority(routes, pAuthorities = []) {\r\n  routes.forEach(route => {\r\n    const meta = route.meta\r\n    const defaultAuthority = pAuthorities[pAuthorities.length - 1] || {permission: '*'}\r\n    if (meta) {\r\n      let authority = {}\r\n      if (!meta.authority) {\r\n        authority = defaultAuthority\r\n      }else if (typeof meta.authority === 'string') {\r\n        authority.permission = meta.authority\r\n      } else if (typeof meta.authority === 'object') {\r\n        authority = meta.authority\r\n        const {role} = authority\r\n        if (typeof role === 'string') {\r\n          authority.role = [role]\r\n        }\r\n        if (!authority.permission && !authority.role) {\r\n          authority = defaultAuthority\r\n        }\r\n      }\r\n      meta.authority = authority\r\n    } else {\r\n      const authority = defaultAuthority\r\n      route.meta = {authority}\r\n    }\r\n    route.meta.pAuthorities = pAuthorities\r\n    if (route.children) {\r\n      formatAuthority(route.children, [...pAuthorities, route.meta.authority])\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 从路由 path 解析 i18n key\r\n * @param path\r\n * @returns {*}\r\n */\r\nfunction getI18nKey(path) {\r\n  const keys = path.split('/').filter(item => !item.startsWith(':') && item != '')\r\n  keys.push('name')\r\n  return keys.join('.')\r\n}\r\n\r\n/**\r\n * 加载导航守卫\r\n * @param guards\r\n * @param options\r\n */\r\nfunction loadGuards(guards, options) {\r\n  const {beforeEach, afterEach} = guards\r\n  const {router} = options\r\n  beforeEach.forEach(guard => {\r\n    if (guard && typeof guard === 'function') {\r\n      router.beforeEach((to, from, next) => guard(to, from, next, options))\r\n    }\r\n  })\r\n  afterEach.forEach(guard => {\r\n    if (guard && typeof guard === 'function') {\r\n      router.afterEach((to, from) => guard(to, from, options))\r\n    }\r\n  })\r\n}\r\n\r\nexport {parseRoutes, loadRoutes, formatAuthority, getI18nKey, loadGuards, deepMergeRoutes, formatRoutes, setAppOptions}\r\n"]}]}